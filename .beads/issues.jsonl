{"id":"the-system-020","title":"[EPIC] Reranker Core Infrastructure","description":"Core reranker infrastructure for Engram search pipeline.\n\nBounded Context: Reranker Domain\nReference: docs/plans/reranker-implementation.md (Section 3.2)\n\nProvides the foundational reranking capabilities including:\n- BatchedReranker for parallel document scoring\n- Model management and singleton patterns\n- Score normalization and result merging\n\nThis epic enables multi-tier reranking architecture.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T22:55:04.069554-06:00","updated_at":"2025-12-08T22:55:04.069554-06:00"}
{"id":"the-system-0mn","title":"Add reranker health check endpoint","description":"GET /health/reranker: model loaded status, last inference time, error count last 5min, circuit breaker state.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-08T23:02:32.531406-06:00","updated_at":"2025-12-08T23:02:32.531406-06:00"}
{"id":"the-system-0vl","title":"Implement UI for Lineage and Replay","description":"Build React components in apps/interface to visualize the lineage graph and session replay data using the new API endpoints.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T01:21:25.207222-06:00","updated_at":"2025-12-07T01:32:59.460857-06:00","closed_at":"2025-12-07T01:32:59.460857-06:00","close_reason":"Implemented React components for Lineage Graph (using React Flow) and Session Replay. Created /session/[sessionId] page."}
{"id":"the-system-17o","title":"Design LLM reranking prompt templates","description":"Design effective prompt templates for listwise reranking.\n\nReference: docs/plans/reranker-implementation.md (Phase 4)\n\nPrompt requirements:\n- Present query and all candidates clearly\n- Request ordered ranking with reasoning\n- Handle different content types (code, text, mixed)\n- Optimize for grok-4-1-fast-reasoning token efficiency\n\nTemplate structure:\n```\nSystem: You are a search relevance expert...\nUser: \nQuery: {query}\nCandidates:\n1. {doc1_content}\n2. {doc2_content}\n...\nRank these candidates by relevance to the query.\nReturn format: [1, 3, 2, ...] most to least relevant.\n```\n\nLocation: packages/search-core/src/services/llm-reranker.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:57:23.380636-06:00","updated_at":"2025-12-08T22:57:23.380636-06:00"}
{"id":"the-system-1cg","title":"Add rerank options to SearchQuery interface","description":"Extend SearchQuery interface with reranking options.\n\nReference: docs/plans/reranker-implementation.md (Section 4.1)\n\nInterface update:\n```typescript\nexport interface SearchOptions {\n  // Existing\n  limit?: number;\n  filters?: SearchFilters;\n  strategy?: SearchStrategy;\n\n  // New: Reranking control\n  rerank?: boolean;              // Default: true\n  rerankTier?: RerankerTier;     // Default: auto-routed\n  rerankDepth?: number;          // How many to fetch for reranking\n}\n```\n\nDefault behavior:\n- rerank: true (enabled by default)\n- rerankTier: undefined (auto-routed)\n- rerankDepth: 30 (oversample for reranking)\n\nLocation: packages/search-core/src/models/schema.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:57:50.618749-06:00","updated_at":"2025-12-08T23:06:54.942258-06:00","closed_at":"2025-12-08T23:06:54.942258-06:00","close_reason":"Added RerankerTier type and rerank options (rerank, rerankTier, rerankDepth) to SearchQuery interface in packages/search-core/src/models/schema.ts"}
{"id":"the-system-1p4","title":"Integrate Microsoft Wassette Library","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T00:35:57.400142-06:00","updated_at":"2025-12-07T00:44:03.560935-06:00","closed_at":"2025-12-07T00:44:03.560935-06:00","close_reason":"Integrated Microsoft Wassette library v0.3.4. Refactored Control Service to use MultiMcpAdapter to connect to both Wassette (stdio) and Execution Service. Removed mock Wassette from Execution Service. Verified with E2E tests.","dependencies":[{"issue_id":"the-system-1p4","depends_on_id":"the-system-5ll","type":"blocks","created_at":"2025-12-07T00:36:36.294796-06:00","created_by":"daemon"},{"issue_id":"the-system-1p4","depends_on_id":"the-system-28p","type":"blocks","created_at":"2025-12-07T00:36:36.327121-06:00","created_by":"daemon"},{"issue_id":"the-system-1p4","depends_on_id":"the-system-3lb","type":"blocks","created_at":"2025-12-07T00:36:36.357739-06:00","created_by":"daemon"},{"issue_id":"the-system-1p4","depends_on_id":"the-system-yvm","type":"blocks","created_at":"2025-12-07T00:36:36.387797-06:00","created_by":"daemon"}]}
{"id":"the-system-1s8","title":"Migrate tests from bun:test to vitest","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:02:32.952965-06:00","updated_at":"2025-12-08T19:13:02.357643-06:00","closed_at":"2025-12-08T19:13:02.357643-06:00","close_reason":"Migrated 50 test files from bun:test to vitest. 197/198 tests passing (1 E2E test requires infrastructure)."}
{"id":"the-system-1v5","title":"Integrate SpladeEmbedder into TextEmbedder","description":"Update TextEmbedder to use SpladeEmbedder for embedSparse() and embedSparseQuery() methods. Replace BM25Sparse usage. Keep BM25Sparse as fallback initially.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:25:05.862727-06:00","updated_at":"2025-12-08T19:43:44.839434-06:00","closed_at":"2025-12-08T19:43:44.839434-06:00","close_reason":"Integrated SpladeEmbedder into TextEmbedder as default sparse embedder, BM25 kept as fallback option","dependencies":[{"issue_id":"the-system-1v5","depends_on_id":"the-system-4au","type":"blocks","created_at":"2025-12-08T19:25:16.360697-06:00","created_by":"daemon"}]}
{"id":"the-system-1wn","title":"Add Test Coverage: packages/ingestion-core","description":"Add comprehensive unit and integration tests for packages/ingestion-core","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T01:51:16.522674-06:00","updated_at":"2025-12-07T01:59:24.390314-06:00","closed_at":"2025-12-07T01:59:24.390314-06:00","close_reason":"Added unit tests for ThinkingExtractor and DiffExtractor, fixed partial matching bug.","labels":["ingestion-core","packages","testing"]}
{"id":"the-system-24i","title":"Create test dataset with relevance judgments","description":"Curate 100+ query-document pairs with human relevance labels for evaluation. Export to JSON for reproducible benchmarks.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-08T23:01:48.398766-06:00","updated_at":"2025-12-08T23:01:48.398766-06:00"}
{"id":"the-system-25p","title":"[EPIC] Testing \u0026 Quality","description":"Unit tests, integration tests, and quality evaluation for reranker system (Section 10)","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-08T23:01:25.788967-06:00","updated_at":"2025-12-08T23:01:25.788967-06:00","dependencies":[{"issue_id":"the-system-25p","depends_on_id":"the-system-hcz","type":"blocks","created_at":"2025-12-08T23:03:03.470975-06:00","created_by":"daemon"}]}
{"id":"the-system-28p","title":"Configure Control Service MCP Client","description":"the-system-1p4","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T00:36:28.953409-06:00","updated_at":"2025-12-07T00:39:29.552858-06:00","closed_at":"2025-12-07T00:39:29.552858-06:00","close_reason":"Updated apps/control to connect to ~/.local/bin/wassette using StdioClientTransport"}
{"id":"the-system-2a6","title":"Create SearchResults component with result cards","description":"Create a search results grid component matching SessionBrowser's design.\n\nReference: docs/plans/search-ui.md (Phase 2: SearchResults Component)\n\nNew file: apps/interface/app/components/SearchResults.tsx\n\nSearchResults component:\n- Header: \"‚óè SEARCH RESULTS\" with match count badge\n- Grid layout: repeat(auto-fill, minmax(220px, 1fr)) - same as SessionBrowser\n- Empty state: \"No matches found. Try different keywords.\"\n- Error state: \"Search unavailable. Check connection.\"\n- Loading state: Skeleton cards with pulse animation\n\nSearchResultCard sub-component props:\n- type: 'thought' | 'code' | 'doc'\n- content: string (truncated to ~100 chars with ellipsis)\n- score: number (0-1, displayed as percentage like \"92% match\")\n- sessionId: string (truncated to 8 chars, clickable)\n- nodeId: string (for future deep linking)\n- timestamp: number (formatted as relative time)\n- onClick: () =\u003e void\n\nVisual design:\n- Card background: rgba(15, 20, 30, 0.6) with glassmorphism\n- Type icon/badge with color:\n  - Thought: üí≠ or brain icon, rgb(139, 92, 246) violet\n  - Code: üíª or code icon, rgb(251, 191, 36) amber  \n  - Doc: üìÑ or file icon, rgb(59, 130, 246) blue\n- Score bar: 5 segments like activity bar, filled based on score percentage\n- Hover: translateY(-2px), border glow, background gradient shift\n- Animation: cardReveal with staggered delay (same as SessionCard)\n\nClick action: navigate to /session/{sessionId}\nFuture: add ?highlight={nodeId} for deep linking to specific node","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T21:39:23.535994-06:00","updated_at":"2025-12-08T21:53:46.845027-06:00","closed_at":"2025-12-08T21:53:46.845027-06:00","close_reason":"Created SearchResults component with result cards, type badges, score visualization, loading skeletons, and error states"}
{"id":"the-system-2bb","title":"Add Test Coverage: packages/execution-core","description":"Add comprehensive unit and integration tests for packages/execution-core","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T01:51:16.421619-06:00","updated_at":"2025-12-07T02:01:51.776297-06:00","closed_at":"2025-12-07T02:01:51.776297-06:00","close_reason":"Tests verified for execution-core (errors, time-travel, rehydrator, replay).","labels":["execution-core","packages","testing"]}
{"id":"the-system-2i4","title":"Update Qdrant schema for separate code/text vectors","description":"CodeEmbedder now uses nomic-embed-text-v1 (768 dim) while TextEmbedder uses e5-small (384 dim). The current schema only has a single 'dense' vector field. Need to: 1) Add separate vector fields (text_dense: 384, code_dense: 768), 2) Update indexer to use correct vector field based on content type, 3) Consider migration strategy for existing data.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T02:20:56.357901-06:00","updated_at":"2025-12-08T02:35:58.080574-06:00","closed_at":"2025-12-08T02:35:58.080574-06:00","close_reason":"Implemented separate text_dense (384d) and code_dense (768d) vector fields with migration support"}
{"id":"the-system-2r3","title":"Implement graceful degradation on reranker failure","description":"If reranker throws/times out: return RRF results with degradation flag. Log error. Don't fail the entire search.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:31.528484-06:00","updated_at":"2025-12-08T23:02:31.528484-06:00"}
{"id":"the-system-2v4","title":"Expand CI/CD pipeline for all services","description":"cloudbuild.yaml only includes build/deploy steps for ingestion service. Need to add similar steps for memory, search, execution, control, and interface services. Consider matrix builds for efficiency. Ref: define-cicd-pipeline.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T02:06:31.315902-06:00","updated_at":"2025-12-08T02:45:53.073412-06:00","closed_at":"2025-12-08T02:45:53.073412-06:00","close_reason":"Added Dockerfiles for control/interface and expanded cloudbuild.yaml for all 6 services with parallel builds"}
{"id":"the-system-3al","title":"Integrate xAI Grok Model","description":"Replace mock model in DecisionEngine with xAI grok-4-1-fast-reasoning using OpenAI compatibility.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T01:19:43.069323-06:00","updated_at":"2025-12-07T01:20:41.45158-06:00","closed_at":"2025-12-07T01:20:41.45158-06:00","close_reason":"Configured DecisionEngine to use xAI provider with grok-4-1-fast-reasoning model via OpenAI compatibility layer."}
{"id":"the-system-3jt","title":"Add TurnNode schema to memory-core","description":"Create TurnNode with user_content, assistant_preview, blob_ref, embedding, sequence_index, files_touched","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T03:13:52.852817-06:00","updated_at":"2025-12-08T03:18:11.118751-06:00","closed_at":"2025-12-08T03:18:11.118751-06:00","close_reason":"Closed","dependencies":[{"issue_id":"the-system-3jt","depends_on_id":"the-system-3sh","type":"blocks","created_at":"2025-12-08T03:14:04.438837-06:00","created_by":"daemon"}]}
{"id":"the-system-3lb","title":"Update Execution Service to use Wassette","description":"the-system-1p4","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T00:36:28.997771-06:00","updated_at":"2025-12-07T00:41:57.107522-06:00","closed_at":"2025-12-07T00:41:57.107522-06:00","close_reason":"Refactored apps/execution to remove mock wassette. Configured apps/control to use MultiMcpAdapter to connect to both wassette (binary) and apps/execution (VFS)."}
{"id":"the-system-3sh","title":"Refactor graph nodes: Replace ThoughtNode with Turn/Reasoning/FileTouch hierarchy","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T03:13:41.027462-06:00","updated_at":"2025-12-08T03:24:06.53209-06:00","closed_at":"2025-12-08T03:24:06.53209-06:00","close_reason":"Closed"}
{"id":"the-system-3v3","title":"Add ReasoningNode schema to memory-core","description":"Create ReasoningNode for thinking blocks within a turn, with content_hash, preview, blob_ref, embedding, sequence_index","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T03:13:53.505541-06:00","updated_at":"2025-12-08T03:18:11.157575-06:00","closed_at":"2025-12-08T03:18:11.157575-06:00","close_reason":"Closed","dependencies":[{"issue_id":"the-system-3v3","depends_on_id":"the-system-3sh","type":"blocks","created_at":"2025-12-08T03:14:04.476967-06:00","created_by":"daemon"}]}
{"id":"the-system-43s","title":"Add structured logging for rerank events","description":"Log: event=search_rerank with query hash, tier, model, inputCandidates, outputResults, latencyMs, topScoreDelta","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:02.506404-06:00","updated_at":"2025-12-08T23:02:02.506404-06:00"}
{"id":"the-system-455","title":"Bounded Context: System Infrastructure","description":"Foundational deployment configuration, container orchestration (GKE/Cloud Run), and database provisioning (Redpanda, FalkorDB, Qdrant). See docs/bitemporal/context/system-infrastructure/","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:47:42.307572-06:00","updated_at":"2025-12-06T22:11:34.264873-06:00","closed_at":"2025-12-06T22:11:34.264879-06:00","labels":["context","gcp","infrastructure"]}
{"id":"the-system-455.1","title":"Define Monorepo Structure","description":"Establish Turborepo v2.6.3 workspace with 'apps', 'packages', and 'tooling'. See docs/bitemporal/context/system-infrastructure/define-monorepo-structure.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:15.819997-06:00","updated_at":"2025-12-06T22:08:27.919338-06:00","closed_at":"2025-12-06T22:08:27.919341-06:00","labels":["infrastructure","setup","turborepo"],"dependencies":[{"issue_id":"the-system-455.1","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:15.820431-06:00","created_by":"daemon"}]}
{"id":"the-system-455.10","title":"Define CI/CD Pipeline","description":"Google Cloud Build configuration (cloudbuild.yaml). See docs/bitemporal/context/system-infrastructure/define-cicd-pipeline.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:16.210169-06:00","updated_at":"2025-12-06T22:11:16.052419-06:00","closed_at":"2025-12-06T22:11:16.052426-06:00","labels":["cicd","gcp","infrastructure"],"dependencies":[{"issue_id":"the-system-455.10","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:16.210608-06:00","created_by":"daemon"}]}
{"id":"the-system-455.11","title":"Define Secret Management","description":"Integrate GCP Secret Manager with Cloud Run. See docs/bitemporal/context/system-infrastructure/define-secret-management.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:16.253675-06:00","updated_at":"2025-12-06T22:11:16.081949-06:00","closed_at":"2025-12-06T22:11:16.081954-06:00","labels":["gcp","infrastructure","security"],"dependencies":[{"issue_id":"the-system-455.11","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:16.25406-06:00","created_by":"daemon"}]}
{"id":"the-system-455.12","title":"Define Log Aggregation","description":"Structured JSON logging (Pino) for Cloud Logging. See docs/bitemporal/context/system-infrastructure/define-log-aggregation.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:16.299128-06:00","updated_at":"2025-12-06T22:10:59.067709-06:00","closed_at":"2025-12-06T22:10:59.067714-06:00","labels":["infrastructure","logging","observability"],"dependencies":[{"issue_id":"the-system-455.12","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:16.299554-06:00","created_by":"daemon"}]}
{"id":"the-system-455.13","title":"Create Development Environment Setup","description":"docker-compose.dev.yml and 'bun run dev' scripts. See docs/bitemporal/context/system-infrastructure/create-development-environment-setup.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:16.345125-06:00","updated_at":"2025-12-06T22:08:55.192389-06:00","closed_at":"2025-12-06T22:08:55.192393-06:00","labels":["dx","infrastructure","setup"],"dependencies":[{"issue_id":"the-system-455.13","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:16.345549-06:00","created_by":"daemon"}]}
{"id":"the-system-455.2","title":"Define Cloud Infrastructure Strategy","description":"Architecture for Cloud Run (Stateless) + GKE Autopilot (Stateful). See docs/bitemporal/context/system-infrastructure/define-cloud-infrastructure-strategy.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:15.863526-06:00","updated_at":"2025-12-06T22:11:27.315546-06:00","closed_at":"2025-12-06T22:11:27.31555-06:00","labels":["architecture","gcp","infrastructure"],"dependencies":[{"issue_id":"the-system-455.2","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:15.863919-06:00","created_by":"daemon"}]}
{"id":"the-system-455.3","title":"Create Ingestion Service Dockerfile","description":"Multi-stage Dockerfile for Ingestion Service (Bun). See docs/bitemporal/context/system-infrastructure/create-ingestion-service-dockerfile.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:15.908008-06:00","updated_at":"2025-12-06T22:10:59.101307-06:00","closed_at":"2025-12-06T22:10:59.10131-06:00","labels":["docker","infrastructure","ingestion"],"dependencies":[{"issue_id":"the-system-455.3","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:15.908412-06:00","created_by":"daemon"}]}
{"id":"the-system-455.4","title":"Create Memory Service Dockerfile","description":"Multi-stage Dockerfile for Memory Service (Bun/Node). See docs/bitemporal/context/system-infrastructure/create-memory-service-dockerfile.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:15.951797-06:00","updated_at":"2025-12-06T22:10:59.130229-06:00","closed_at":"2025-12-06T22:10:59.130231-06:00","labels":["docker","infrastructure","memory"],"dependencies":[{"issue_id":"the-system-455.4","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:15.952181-06:00","created_by":"daemon"}]}
{"id":"the-system-455.5","title":"Create Search Service Dockerfile","description":"Multi-stage Dockerfile for Search Service. See docs/bitemporal/context/system-infrastructure/create-search-service-dockerfile.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:15.9968-06:00","updated_at":"2025-12-06T22:10:59.160841-06:00","closed_at":"2025-12-06T22:10:59.160843-06:00","labels":["docker","infrastructure","search"],"dependencies":[{"issue_id":"the-system-455.5","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:15.997201-06:00","created_by":"daemon"}]}
{"id":"the-system-455.6","title":"Create Execution Service Dockerfile","description":"Multi-stage Dockerfile for Execution Service (Wasm). See docs/bitemporal/context/system-infrastructure/create-execution-service-dockerfile.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:16.039854-06:00","updated_at":"2025-12-06T22:10:59.189711-06:00","closed_at":"2025-12-06T22:10:59.189713-06:00","labels":["docker","execution","infrastructure"],"dependencies":[{"issue_id":"the-system-455.6","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:16.040344-06:00","created_by":"daemon"}]}
{"id":"the-system-455.7","title":"Configure Redpanda Deployment","description":"docker-compose and Helm charts for Redpanda. See docs/bitemporal/context/system-infrastructure/configure-redpanda-deployment.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:16.082757-06:00","updated_at":"2025-12-06T22:10:11.214638-06:00","closed_at":"2025-12-06T22:10:11.214642-06:00","labels":["deployment","infrastructure","redpanda"],"dependencies":[{"issue_id":"the-system-455.7","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:16.083154-06:00","created_by":"daemon"}]}
{"id":"the-system-455.8","title":"Configure FalkorDB Deployment","description":"docker-compose and Kubernetes manifest for FalkorDB. See docs/bitemporal/context/system-infrastructure/configure-falkordb-deployment.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:16.124943-06:00","updated_at":"2025-12-06T22:10:11.247383-06:00","closed_at":"2025-12-06T22:10:11.247386-06:00","labels":["deployment","falkordb","infrastructure"],"dependencies":[{"issue_id":"the-system-455.8","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:16.125294-06:00","created_by":"daemon"}]}
{"id":"the-system-455.9","title":"Configure Qdrant Deployment","description":"docker-compose and Helm charts for Qdrant. See docs/bitemporal/context/system-infrastructure/configure-qdrant-deployment.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:16.166807-06:00","updated_at":"2025-12-06T22:10:11.275534-06:00","closed_at":"2025-12-06T22:10:11.275536-06:00","labels":["deployment","infrastructure","qdrant"],"dependencies":[{"issue_id":"the-system-455.9","depends_on_id":"the-system-455","type":"parent-child","created_at":"2025-12-06T21:48:16.167296-06:00","created_by":"daemon"}]}
{"id":"the-system-4au","title":"Implement SPLADE pooling algorithm","description":"Implement spladePooling function: max pooling over sequence + ReLU + log(1+x) scaling. Output sparse vector with indices and values arrays. Handle 30,522-dim BERT vocabulary.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:25:04.937404-06:00","updated_at":"2025-12-08T19:37:27.307598-06:00","closed_at":"2025-12-08T19:37:27.307598-06:00","close_reason":"Already implemented in SpladeEmbedder.spladePooling() - max pooling over sequence + ReLU + log1p, handles 30,522-dim BERT vocab, outputs sparse {indices, values}","dependencies":[{"issue_id":"the-system-4au","depends_on_id":"the-system-5nj","type":"blocks","created_at":"2025-12-08T19:25:16.328248-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy","title":"Bounded Context: Agent Control","description":"The 'Frontal Cortex'. Mastra agents, workflows, and decision loops. See docs/bitemporal/context/agent-control/","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:47:42.521911-06:00","updated_at":"2025-12-06T22:33:15.178178-06:00","closed_at":"2025-12-06T22:33:15.17818-06:00","labels":["context","control","mastra"]}
{"id":"the-system-4sy.1","title":"Initialize Mastra Framework Project","description":"Setup apps/control with Mastra core and Vercel AI SDK. See docs/bitemporal/context/agent-control/initialize-mastra-framework-project.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:04.82216-06:00","updated_at":"2025-12-06T22:32:10.311593-06:00","closed_at":"2025-12-06T22:32:10.311596-06:00","labels":["control","mastra","setup"],"dependencies":[{"issue_id":"the-system-4sy.1","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:04.822514-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.10","title":"Implement Tool Selection Strategy","description":"Static vs Dynamic tool injection logic. See docs/bitemporal/context/agent-control/implement-tool-selection-strategy.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:55:05.205829-06:00","updated_at":"2025-12-06T23:10:23.431231-06:00","closed_at":"2025-12-06T23:10:23.431234-06:00","labels":["control","optimization","tools"],"dependencies":[{"issue_id":"the-system-4sy.10","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:05.206288-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.11","title":"Develop Agent Heartbeat Monitor","description":"Watchdog for stuck agent states. See docs/bitemporal/context/agent-control/develop-agent-heartbeat-monitor.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:55:05.249694-06:00","updated_at":"2025-12-06T23:21:48.867977-06:00","closed_at":"2025-12-06T23:21:48.867979-06:00","labels":["control","monitor","resilience"],"dependencies":[{"issue_id":"the-system-4sy.11","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:05.250052-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.12","title":"Define Fallback Behavior Logic","description":"Error recovery for hallucinations or bad JSON. See docs/bitemporal/context/agent-control/define-fallback-behavior-logic.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:55:05.289559-06:00","updated_at":"2025-12-07T01:00:13.218045-06:00","closed_at":"2025-12-07T01:00:13.218045-06:00","close_reason":"Implemented 'recovering' state in agentMachine and recoverError actor in DecisionEngine to gracefully handle errors.","labels":["control","error-handling"],"dependencies":[{"issue_id":"the-system-4sy.12","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:05.289947-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.2","title":"Define Agent Persona Configuration","description":"The Soul persona definition and core system prompt. See docs/bitemporal/context/agent-control/define-agent-persona-configuration.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:04.863714-06:00","updated_at":"2025-12-06T22:32:10.341548-06:00","closed_at":"2025-12-06T22:32:10.34155-06:00","labels":["control","persona","prompt"],"dependencies":[{"issue_id":"the-system-4sy.2","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:04.864076-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.3","title":"Implement Mastra Workflow Definitions","description":"The Think-Act-Observe loop workflow in Mastra. See docs/bitemporal/context/agent-control/implement-mastra-workflow-definitions.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:04.906247-06:00","updated_at":"2025-12-06T22:32:10.369882-06:00","closed_at":"2025-12-06T22:32:10.369884-06:00","labels":["control","logic","workflow"],"dependencies":[{"issue_id":"the-system-4sy.3","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:04.906621-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.4","title":"Create Agent State Machine","description":"XState machine for agent lifecycle status (IDLE, ACTING). See docs/bitemporal/context/agent-control/create-agent-state-machine.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:55:04.948837-06:00","updated_at":"2025-12-06T23:09:19.610523-06:00","closed_at":"2025-12-06T23:09:19.610526-06:00","labels":["control","state","xstate"],"dependencies":[{"issue_id":"the-system-4sy.4","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:04.949233-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.5","title":"Implement Graphiti MCP Client Integration","description":"Bridge Memory MCP tools to Mastra agent. See docs/bitemporal/context/agent-control/implement-graphiti-mcp-client-integration.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:04.995243-06:00","updated_at":"2025-12-06T23:15:26.591915-06:00","closed_at":"2025-12-06T23:15:26.591919-06:00","labels":["control","integration","mcp"],"dependencies":[{"issue_id":"the-system-4sy.5","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:04.995629-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.6","title":"Implement Wassette MCP Client Integration","description":"Bridge Execution MCP tools to Mastra agent. See docs/bitemporal/context/agent-control/implement-wassette-mcp-client-integration.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:05.037032-06:00","updated_at":"2025-12-06T23:15:26.622311-06:00","closed_at":"2025-12-06T23:15:26.622314-06:00","labels":["control","integration","mcp"],"dependencies":[{"issue_id":"the-system-4sy.6","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:05.037369-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.7","title":"Define Decision Loop Logic","description":"Logic to route LLM output (tool_call vs thought vs content). See docs/bitemporal/context/agent-control/define-decision-loop-logic.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:05.07853-06:00","updated_at":"2025-12-06T23:38:26.430145-06:00","closed_at":"2025-12-06T23:38:26.430149-06:00","labels":["control","logic","routing"],"dependencies":[{"issue_id":"the-system-4sy.7","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:05.078882-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.8","title":"Implement Context Window Manager","description":"Strategy to assemble prompts within token limits. See docs/bitemporal/context/agent-control/implement-context-window-manager.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:55:05.120761-06:00","updated_at":"2025-12-06T23:10:01.451043-06:00","closed_at":"2025-12-06T23:10:01.451046-06:00","labels":["context","control","tokens"],"dependencies":[{"issue_id":"the-system-4sy.8","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:05.12118-06:00","created_by":"daemon"}]}
{"id":"the-system-4sy.9","title":"Create Agent Session Initializer","description":"Bootstrap new sessions in Memory and Redpanda. See docs/bitemporal/context/agent-control/create-agent-session-initializer.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:05.16388-06:00","updated_at":"2025-12-07T00:25:23.07323-06:00","closed_at":"2025-12-07T00:25:23.07323-06:00","close_reason":"Implemented SessionInitializer and SessionManager in apps/control","labels":["control","init","session"],"dependencies":[{"issue_id":"the-system-4sy.9","depends_on_id":"the-system-4sy","type":"parent-child","created_at":"2025-12-06T21:55:05.16433-06:00","created_by":"daemon"}]}
{"id":"the-system-5jl","title":"Write unit tests for RerankerRouter","description":"Test query classification, tier selection, routing heuristics. File: packages/search-core/src/services/__tests__/reranker-router.test.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:01:44.090351-06:00","updated_at":"2025-12-08T23:01:44.090351-06:00"}
{"id":"the-system-5ll","title":"Install Wassette Binary","description":"the-system-1p4","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T00:36:28.913252-06:00","updated_at":"2025-12-07T00:38:05.086774-06:00","closed_at":"2025-12-07T00:38:05.086774-06:00","close_reason":"Installed wassette binary v0.3.4 to ~/.local/bin/wassette and verified it is executable."}
{"id":"the-system-5nj","title":"Create SpladeEmbedder class with ONNX model loading","description":"Implement SpladeEmbedder class in packages/search-core/src/services/splade-embedder.ts. Load sparse-encoder-testing/splade-bert-tiny-nq-onnx model via onnxruntime-node. Include model caching and lazy initialization.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:24:50.584545-06:00","updated_at":"2025-12-08T19:32:22.691119-06:00","closed_at":"2025-12-08T19:32:22.691119-06:00","close_reason":"Implemented SpladeEmbedder class with ONNX model loading via @huggingface/transformers. Features: lazy initialization, model caching (singleton pattern), SPLADE pooling (max + ReLU + log1p). Verified working: 98-183 sparse dimensions, 1-8ms inference."}
{"id":"the-system-5rh","title":"Write integration tests for reranker pipeline","description":"End-to-end tests: index documents, search with/without rerank, verify relevance improvement. File: packages/search-core/src/services/__tests__/reranker.integration.test.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:01:46.473247-06:00","updated_at":"2025-12-08T23:01:46.473247-06:00"}
{"id":"the-system-622","title":"Add Test Coverage: packages/logger","description":"Add comprehensive unit and integration tests for packages/logger","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T01:51:16.572667-06:00","updated_at":"2025-12-07T01:59:17.196109-06:00","closed_at":"2025-12-07T01:59:17.19611-06:00","labels":["logger","packages","testing"]}
{"id":"the-system-63j","title":"Implement sparse-only search in SearchRetriever","description":"Implement the sparse search path in SearchRetriever.search() that currently returns an empty array.\n\nReference: docs/plans/hybrid-retriever.md (Phase 1)\n\nChanges to packages/search-core/src/services/retriever.ts:\n- Add call to textEmbedder.embedSparseQuery(text) to generate SPLADE sparse vector\n- Use client.query() with sparse vector format: { indices, values }\n- Set using: \"sparse\" to target the sparse named vector field\n- Apply filter and score_threshold (default 0.1 for sparse)\n- Return results.points to match dense search return format\n\nThe sparse search is triggered when:\n- User explicitly sets strategy: \"sparse\"\n- QueryClassifier detects quoted strings (exact match intent)\n\nSparse search works for both text and code content since SPLADE is content-agnostic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T21:37:49.339784-06:00","updated_at":"2025-12-08T21:46:15.838917-06:00","closed_at":"2025-12-08T21:46:15.838917-06:00","close_reason":"Implemented sparse-only search using embedSparseQuery and client.query with sparse vector format"}
{"id":"the-system-6bo","title":"Implement hybrid search with RRF fusion in SearchRetriever","description":"Implement true hybrid search in SearchRetriever.search() using Qdrant's prefetch + RRF fusion API.\n\nReference: docs/plans/hybrid-retriever.md (Phase 2)\n\nChanges to packages/search-core/src/services/retriever.ts:\n- Generate both dense and sparse query vectors in parallel using Promise.all\n- Use client.query() with prefetch array containing:\n  - Dense vector prefetch: { query: denseVector, using: vectorName, limit: limit * 2 }\n  - Sparse vector prefetch: { query: { indices, values }, using: \"sparse\", limit: limit * 2 }\n- Set query: { fusion: \"rrf\" } for Reciprocal Rank Fusion\n- Oversample in prefetch (2x limit) to give RRF more candidates to fuse\n- Apply filter if provided\n- No score_threshold with RRF (scores are rank-based)\n- Return results.points\n\nThe hybrid search is the default strategy for most natural language queries.\nQueryClassifier returns alpha weight (0.0-1.0) which could be used for weighted fusion in future.\n\nDepends on: the-system-63j (sparse search implementation provides the pattern)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T21:38:01.042392-06:00","updated_at":"2025-12-08T21:47:09.802851-06:00","closed_at":"2025-12-08T21:47:09.802851-06:00","close_reason":"Implemented hybrid search with RRF fusion using Qdrant prefetch API. Parallel vector generation and 2x oversampling for better fusion.","dependencies":[{"issue_id":"the-system-6bo","depends_on_id":"the-system-63j","type":"blocks","created_at":"2025-12-08T21:38:08.75772-06:00","created_by":"daemon"}]}
{"id":"the-system-70a","title":"Add project context properties to SessionNode","description":"Add working_dir, git_remote, agent_type to SessionNode for project-level filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T03:13:55.589464-06:00","updated_at":"2025-12-08T03:18:11.081148-06:00","closed_at":"2025-12-08T03:18:11.081148-06:00","close_reason":"Closed","dependencies":[{"issue_id":"the-system-70a","depends_on_id":"the-system-3sh","type":"blocks","created_at":"2025-12-08T03:14:04.554328-06:00","created_by":"daemon"}]}
{"id":"the-system-7kh","title":"Implement query complexity classifier","description":"Implement query complexity classification for routing decisions.\n\nReference: docs/plans/reranker-implementation.md (Appendix B)\n\nClassification function:\n```typescript\nfunction classifyQueryComplexity(query: string): \"simple\" | \"moderate\" | \"complex\" {\n  const features = {\n    length: query.length,\n    words: query.split(/\\s+/).length,\n    hasQuotes: /\"[^\"]+\"/.test(query),\n    hasOperators: /AND|OR|NOT|\\+|-/.test(query),\n    hasCode: /[a-zA-Z]+\\.[a-zA-Z]+\\(|function\\s|class\\s|=\u003e/.test(query),\n    questionWords: /^(what|how|why|when|where|who|which)/i.test(query),\n  };\n  // Score-based classification\n}\n```\n\nUsed by RerankerRouter to select appropriate tier.\n\nLocation: packages/search-core/src/services/query-classifier.ts (extend existing)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:56:09.269894-06:00","updated_at":"2025-12-08T22:56:09.269894-06:00"}
{"id":"the-system-7l1","title":"Bounded Context: Observability Interface","description":"The 'Mirror'. API layer, GraphQL lineage, and replay interface. See docs/bitemporal/context/observability-interface/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:47:42.567017-06:00","updated_at":"2025-12-06T22:33:15.206383-06:00","closed_at":"2025-12-06T22:33:15.206385-06:00","labels":["context","interface","nextjs"]}
{"id":"the-system-7l1.1","title":"Define API Route Structure","description":"Next.js App Router setup for /api/ingest, /api/search, /api/graph. See docs/bitemporal/context/observability-interface/define-api-route-structure.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:31.104036-06:00","updated_at":"2025-12-06T22:32:35.392999-06:00","closed_at":"2025-12-06T22:32:35.393001-06:00","labels":["interface","nextjs","routing"],"dependencies":[{"issue_id":"the-system-7l1.1","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.104425-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.10","title":"Create API Request Validator","description":"Zod middleware for request body validation. See docs/bitemporal/context/observability-interface/create-api-request-validator.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:31.489571-06:00","updated_at":"2025-12-06T22:32:35.481194-06:00","closed_at":"2025-12-06T22:32:35.481197-06:00","labels":["interface","validation","zod"],"dependencies":[{"issue_id":"the-system-7l1.10","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.491-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.11","title":"Implement Response Serialization","description":"Consistent JSON envelope for API responses. See docs/bitemporal/context/observability-interface/implement-response-serialization.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:55:31.535004-06:00","updated_at":"2025-12-07T00:32:08.165391-06:00","closed_at":"2025-12-07T00:32:08.165391-06:00","close_reason":"Implemented standardized API response wrappers (apiSuccess, apiError) and updated endpoints. Fixed build issues.","labels":["api","interface","standards"],"dependencies":[{"issue_id":"the-system-7l1.11","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.535404-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.12","title":"Develop API Usage Telemetry","description":"Middleware logging for Cloud Logging. See docs/bitemporal/context/observability-interface/develop-api-usage-telemetry.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:55:31.578377-06:00","updated_at":"2025-12-07T01:03:39.24205-06:00","closed_at":"2025-12-07T01:03:39.24205-06:00","close_reason":"Implemented withTelemetry middleware using simple console logging (due to Next.js/Turbopack pino compatibility issues) and applied it to /api/ingest.","labels":["interface","logging","observability"],"dependencies":[{"issue_id":"the-system-7l1.12","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.578753-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.13","title":"Create Swagger OpenAPI Documentation","description":"Auto-generated API docs at /api/docs. See docs/bitemporal/context/observability-interface/create-swagger-openapi-documentation.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:55:31.620621-06:00","updated_at":"2025-12-06T23:55:07.690411-06:00","closed_at":"2025-12-06T23:55:07.690416-06:00","labels":["docs","interface","swagger"],"dependencies":[{"issue_id":"the-system-7l1.13","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.621056-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.2","title":"Create GraphQL Schema Definition","description":"Schema for Session/Thought/Fact graph traversal. See docs/bitemporal/context/observability-interface/create-graphql-schema-definition.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:55:31.147222-06:00","updated_at":"2025-12-06T23:24:18.9049-06:00","closed_at":"2025-12-06T23:24:18.904903-06:00","labels":["graphql","interface","schema"],"dependencies":[{"issue_id":"the-system-7l1.2","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.147603-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.3","title":"Implement REST API Scaffolding","description":"Standardized error handling and wrappers for NextResponse. See docs/bitemporal/context/observability-interface/implement-rest-api-scaffolding.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:31.189463-06:00","updated_at":"2025-12-06T22:32:35.421096-06:00","closed_at":"2025-12-06T22:32:35.421097-06:00","labels":["api","interface","utils"],"dependencies":[{"issue_id":"the-system-7l1.3","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.189884-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.4","title":"Develop Ingest Stream Endpoint","description":"POST /api/ingest webhook for raw event testing. See docs/bitemporal/context/observability-interface/develop-ingest-stream-endpoint.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:55:31.230885-06:00","updated_at":"2025-12-07T00:58:40.657795-06:00","closed_at":"2025-12-07T00:58:40.657795-06:00","close_reason":"Implemented Redpanda producer logic in /api/ingest via @the-soul/storage KafkaClient. Secured with RBAC.","labels":["endpoint","ingestion","interface"],"dependencies":[{"issue_id":"the-system-7l1.4","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.231326-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.5","title":"Develop Semantic Search Endpoint","description":"POST /api/search proxy to Qdrant/Search Service. See docs/bitemporal/context/observability-interface/develop-semantic-search-endpoint.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:55:31.273817-06:00","updated_at":"2025-12-06T23:26:13.049726-06:00","closed_at":"2025-12-06T23:26:13.049729-06:00","labels":["endpoint","interface","search"],"dependencies":[{"issue_id":"the-system-7l1.5","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.274271-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.6","title":"Develop Lineage Query Endpoint","description":"GET /api/lineage/:sessionId logic using FalkorDB traversals. See docs/bitemporal/context/observability-interface/develop-lineage-query-endpoint.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:55:31.315247-06:00","updated_at":"2025-12-06T23:27:47.079813-06:00","closed_at":"2025-12-06T23:27:47.079816-06:00","labels":["endpoint","graph","interface"],"dependencies":[{"issue_id":"the-system-7l1.6","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.315619-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.7","title":"Develop Session Replay Endpoint","description":"POST /api/replay triggers Deterministic Execution. See docs/bitemporal/context/observability-interface/develop-session-replay-endpoint.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:55:31.358518-06:00","updated_at":"2025-12-07T00:53:09.015891-06:00","closed_at":"2025-12-07T00:53:09.015891-06:00","close_reason":"Implemented /api/replay/[sessionId] endpoint to retrieve linear session history from FalkorDB.","labels":["endpoint","interface","replay"],"dependencies":[{"issue_id":"the-system-7l1.7","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.35897-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.8","title":"Implement Authentication Middleware","description":"Clerk integration for protecting /api routes. See docs/bitemporal/context/observability-interface/implement-authentication-middleware.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:55:31.401751-06:00","updated_at":"2025-12-06T22:32:35.450231-06:00","closed_at":"2025-12-06T22:32:35.450233-06:00","labels":["auth","clerk","interface"],"dependencies":[{"issue_id":"the-system-7l1.8","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.402188-06:00","created_by":"daemon"}]}
{"id":"the-system-7l1.9","title":"Implement RBAC Authorization Logic","description":"Role-based checks (Viewer vs Admin). See docs/bitemporal/context/observability-interface/implement-rbac-authorization-logic.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:55:31.446552-06:00","updated_at":"2025-12-07T00:45:59.19262-06:00","closed_at":"2025-12-07T00:45:59.19262-06:00","close_reason":"Implemented RBAC logic (withRole middleware) and applied it to /api/ingest.","labels":["auth","interface","rbac"],"dependencies":[{"issue_id":"the-system-7l1.9","depends_on_id":"the-system-7l1","type":"parent-child","created_at":"2025-12-06T21:55:31.446957-06:00","created_by":"daemon"}]}
{"id":"the-system-7m0","title":"[EPIC] Risk Mitigation \u0026 Safety","description":"Lazy model loading, A/B testing framework, rate limiting for LLM tier (Section 12)","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-08T23:01:28.827114-06:00","updated_at":"2025-12-08T23:01:28.827114-06:00","dependencies":[{"issue_id":"the-system-7m0","depends_on_id":"the-system-020","type":"blocks","created_at":"2025-12-08T23:03:07.507811-06:00","created_by":"daemon"}]}
{"id":"the-system-7xg","title":"Implement NEXT relationship chaining for thoughts","description":"The Memory service has a TODO comment for creating NEXT edges between sequential thoughts within sessions. This breaks thought lineage visualization. Need to update memory/src/index.ts to create NEXT edges when processing parsed events. Ref: define-thought-node-schema.md","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-08T02:05:40.437926-06:00","updated_at":"2025-12-08T02:15:29.998911-06:00","closed_at":"2025-12-08T02:15:29.998911-06:00","close_reason":"Closed"}
{"id":"the-system-7xi","title":"[EPIC] Schema \u0026 Data Model Updates","description":"Schema updates for reranking support.\n\nBounded Context: Data Model Domain\nReference: docs/plans/reranker-implementation.md (Section 7)\n\nUpdates required:\n- Qdrant collection schema (ColBERT multivector)\n- Search result schema (rerankerScore field)\n- API response schema (reranker metadata)\n\nSchema migrations for existing data.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T22:58:19.493877-06:00","updated_at":"2025-12-08T22:58:19.493877-06:00","dependencies":[{"issue_id":"the-system-7xi","depends_on_id":"the-system-020","type":"blocks","created_at":"2025-12-08T23:02:47.022205-06:00","created_by":"daemon"}]}
{"id":"the-system-82y","title":"Run typecheck, lint, format, and test","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-08T02:43:44.282608-06:00","updated_at":"2025-12-08T02:53:44.524789-06:00","closed_at":"2025-12-08T02:53:44.524789-06:00","close_reason":"Ran typecheck (pass), lint (warnings only), format (clean), tests (pass individually, Bun isolation issues when combined)"}
{"id":"the-system-8ct","title":"Add Test Coverage: packages/events","description":"Add comprehensive unit and integration tests for packages/events","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T01:51:16.369165-06:00","updated_at":"2025-12-07T01:55:06.883502-06:00","closed_at":"2025-12-07T01:55:06.883502-06:00","close_reason":"Added unit tests for RawStreamEventSchema and ParsedStreamEventSchema.","labels":["events","packages","testing"]}
{"id":"the-system-8ol","title":"Update SearchResult schema with rerankerScore","description":"Add reranker score fields to search result schema.\n\nReference: docs/plans/reranker-implementation.md (Section 7.2)\n\nSchema update:\n```typescript\nexport interface SearchResult {\n  id: string;\n\n  // Scores\n  rrfScore: number;           // Original hybrid fusion score\n  rerankerScore?: number;     // Cross-encoder/ColBERT score\n  rerankTier?: RerankerTier;  // Which reranker was used\n\n  // Existing\n  payload: SearchResultPayload;\n}\n```\n\nBoth scores preserved for transparency and debugging.\n\nLocation: packages/search-core/src/models/schema.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:58:26.887024-06:00","updated_at":"2025-12-08T23:08:37.233174-06:00","closed_at":"2025-12-08T23:08:37.233174-06:00","close_reason":"Added SearchResultPayload and SearchResult interfaces with rrfScore, rerankerScore, and rerankTier fields"}
{"id":"the-system-95f","title":"Create quality evaluation script with NDCG/MRR metrics","description":"Build evaluation harness: test queries, ground truth, compute NDCG@10, MRR, MAP. Compare RRF-only vs RRF+rerank. File: scripts/evaluate-reranker.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:01:47.472355-06:00","updated_at":"2025-12-08T23:01:47.472355-06:00"}
{"id":"the-system-9dd","title":"Bounded Context: Semantic Search","description":"The 'Cortex'. Vector indexing, hybrid search, and reranking. See docs/bitemporal/context/semantic-search/","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:47:42.480224-06:00","updated_at":"2025-12-06T23:26:13.08016-06:00","closed_at":"2025-12-06T23:26:13.080162-06:00","labels":["context","qdrant","search"]}
{"id":"the-system-9dd.1","title":"Define Vector Point Schema","description":"Zod schema for Qdrant points (dense/sparse vectors + metadata). See docs/bitemporal/context/semantic-search/define-vector-point-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.310246-06:00","updated_at":"2025-12-06T22:28:17.730493-06:00","closed_at":"2025-12-06T22:28:17.730495-06:00","labels":["qdrant","schema","search"],"dependencies":[{"issue_id":"the-system-9dd.1","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.310637-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.10","title":"Develop Dense Vector Retrieval","description":"Execute Qdrant search on 'dense' vector field. See docs/bitemporal/context/semantic-search/develop-dense-vector-retrieval.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.693549-06:00","updated_at":"2025-12-06T22:29:05.186656-06:00","closed_at":"2025-12-06T22:29:05.186659-06:00","labels":["dense","retrieval","search"],"dependencies":[{"issue_id":"the-system-9dd.10","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.6939-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.11","title":"Develop Sparse Graph Keyword Retrieval","description":"Execute Qdrant search on 'sparse' vector field. See docs/bitemporal/context/semantic-search/develop-sparse-graph-keyword-retrieval.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.736242-06:00","updated_at":"2025-12-06T22:29:05.215971-06:00","closed_at":"2025-12-06T22:29:05.215974-06:00","labels":["retrieval","search","sparse"],"dependencies":[{"issue_id":"the-system-9dd.11","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.736624-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.12","title":"Implement Result Re-ranking Logic","description":"Cross-Encoder (bge-reranker) to refine top-k results. See docs/bitemporal/context/semantic-search/implement-result-re-ranking-logic.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:52:43.778368-06:00","updated_at":"2025-12-06T23:23:16.248997-06:00","closed_at":"2025-12-06T23:23:16.249-06:00","labels":["ml","ranking","search"],"dependencies":[{"issue_id":"the-system-9dd.12","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.778789-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.13","title":"Create Embedding Batch Processor","description":"Queue system to batch embedding generation. See docs/bitemporal/context/semantic-search/create-embedding-batch-processor.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:52:43.822685-06:00","updated_at":"2025-12-06T23:43:46.907094-06:00","closed_at":"2025-12-06T23:43:46.907097-06:00","labels":["batching","performance","search"],"dependencies":[{"issue_id":"the-system-9dd.13","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.823076-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.14","title":"Implement Qdrant Snapshot Manager","description":"Automated backup of vector index to GCS. See docs/bitemporal/context/semantic-search/implement-qdrant-snapshot-manager.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:52:43.864783-06:00","updated_at":"2025-12-07T01:01:26.548378-06:00","closed_at":"2025-12-07T01:01:26.548378-06:00","close_reason":"Implemented SnapshotManager in @the-soul/search-core with create/list snapshot capabilities.","labels":["backup","ops","search"],"dependencies":[{"issue_id":"the-system-9dd.14","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.865127-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.15","title":"Create Similarity Score Threshold Configuration","description":"Dynamic thresholds to filter irrelevant results. See docs/bitemporal/context/semantic-search/create-similarity-score-threshold-configuration.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:52:43.90902-06:00","updated_at":"2025-12-06T23:58:01.176471-06:00","closed_at":"2025-12-06T23:58:01.176474-06:00","labels":["config","search","tuning"],"dependencies":[{"issue_id":"the-system-9dd.15","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.909425-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.16","title":"Develop Semantic Deduplication Logic","description":"Prevent indexing semantically identical duplicates. See docs/bitemporal/context/semantic-search/develop-semantic-deduplication-logic.md","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-06T21:52:43.949354-06:00","updated_at":"2025-12-07T01:18:14.912124-06:00","closed_at":"2025-12-07T01:18:14.912124-06:00","close_reason":"Implemented Deduplicator service in @the-soul/search-core using vector similarity search.","labels":["dedupe","quality","search"],"dependencies":[{"issue_id":"the-system-9dd.16","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.949671-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.2","title":"Select Text Embedding Model","description":"Choice: intfloat/multilingual-e5-small (ONNX). See docs/bitemporal/context/semantic-search/select-text-embedding-model.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.353524-06:00","updated_at":"2025-12-06T22:28:17.759041-06:00","closed_at":"2025-12-06T22:28:17.759043-06:00","labels":["model","search","text"],"dependencies":[{"issue_id":"the-system-9dd.2","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.353852-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.3","title":"Select Code Embedding Model","description":"Choice: nomic-embed-text-v1.5 (8k context). See docs/bitemporal/context/semantic-search/select-code-embedding-model.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.39731-06:00","updated_at":"2025-12-06T22:28:17.789019-06:00","closed_at":"2025-12-06T22:28:17.789022-06:00","labels":["code","model","search"],"dependencies":[{"issue_id":"the-system-9dd.3","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.397728-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.4","title":"Implement Text Embedding Service","description":"Wrapper for fast-embed/ONNX to generate text vectors. See docs/bitemporal/context/semantic-search/implement-text-embedding-service.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.439112-06:00","updated_at":"2025-12-06T22:28:17.81775-06:00","closed_at":"2025-12-06T22:28:17.817752-06:00","labels":["embedding","search","service"],"dependencies":[{"issue_id":"the-system-9dd.4","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.439559-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.5","title":"Implement Code Embedding Service","description":"Wrapper for nomic-embed to generate code vectors. See docs/bitemporal/context/semantic-search/implement-code-embedding-service.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.482698-06:00","updated_at":"2025-12-06T22:28:17.844903-06:00","closed_at":"2025-12-06T22:28:17.844905-06:00","labels":["embedding","search","service"],"dependencies":[{"issue_id":"the-system-9dd.5","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.483104-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.6","title":"Configure Qdrant Collection Manager","description":"Script to init Qdrant with dense/sparse configuration. See docs/bitemporal/context/semantic-search/configure-qdrant-collection-manager.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.526279-06:00","updated_at":"2025-12-06T22:28:36.503247-06:00","closed_at":"2025-12-06T22:28:36.50325-06:00","labels":["ops","qdrant","search"],"dependencies":[{"issue_id":"the-system-9dd.6","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.52668-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.7","title":"Implement Vector Upsert Logic","description":"Indexer service listening to memory.node_created events. See docs/bitemporal/context/semantic-search/implement-vector-upsert-logic.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.569542-06:00","updated_at":"2025-12-06T22:29:05.127435-06:00","closed_at":"2025-12-06T22:29:05.127442-06:00","labels":["indexing","redpanda","search"],"dependencies":[{"issue_id":"the-system-9dd.7","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.56991-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.8","title":"Define Hybrid Search Request Schema","description":"Interface for search queries (text, filters, strategy). See docs/bitemporal/context/semantic-search/define-hybrid-search-request-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:43.610895-06:00","updated_at":"2025-12-06T22:29:05.157487-06:00","closed_at":"2025-12-06T22:29:05.157489-06:00","labels":["api","schema","search"],"dependencies":[{"issue_id":"the-system-9dd.8","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.611304-06:00","created_by":"daemon"}]}
{"id":"the-system-9dd.9","title":"Implement Intent Classifier for Queries","description":"Heuristic router to weight dense vs sparse search. See docs/bitemporal/context/semantic-search/implement-intent-classifier-for-queries.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:52:43.652792-06:00","updated_at":"2025-12-06T23:59:35.580581-06:00","closed_at":"2025-12-06T23:59:35.580584-06:00","labels":["nlp","router","search"],"dependencies":[{"issue_id":"the-system-9dd.9","depends_on_id":"the-system-9dd","type":"parent-child","created_at":"2025-12-06T21:52:43.653219-06:00","created_by":"daemon"}]}
{"id":"the-system-9we","title":"Improve code coverage across the monorepo","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-08T02:44:22.329459-06:00","updated_at":"2025-12-08T02:56:44.70659-06:00","closed_at":"2025-12-08T02:56:44.70659-06:00","close_reason":"Added decision engine helper tests, analyzed coverage gaps"}
{"id":"the-system-a1m","title":"Implement archive before graph pruning","description":"GraphPruner deletes old transaction history without archiving first. Need to export to JSONL before deletion, then upload to GCS cold storage to preserve audit trail. Ref: implement-graph-pruning-strategy.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T02:06:07.02924-06:00","updated_at":"2025-12-08T02:32:57.807637-06:00","closed_at":"2025-12-08T02:32:57.807637-06:00","close_reason":"Implemented archive to JSONL before pruning with BlobStore integration"}
{"id":"the-system-ad2","title":"Bounded Context: Cognitive Ingestion","description":"The 'Nervous System'. Stream intake, protocol detection, parsing, and sanitization. See docs/bitemporal/context/cognitive-ingestion/","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:47:42.349348-06:00","updated_at":"2025-12-06T22:33:15.059846-06:00","closed_at":"2025-12-06T22:33:15.059849-06:00","labels":["context","ingestion","redpanda"]}
{"id":"the-system-ad2.1","title":"Define Raw Stream Event Schema","description":"Zod schema for validating raw JSON payloads from OpenAI/Anthropic. See docs/bitemporal/context/cognitive-ingestion/define-raw-stream-event-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:49.946059-06:00","updated_at":"2025-12-06T22:13:50.376277-06:00","closed_at":"2025-12-06T22:13:50.37628-06:00","labels":["ingestion","schema","zod"],"dependencies":[{"issue_id":"the-system-ad2.1","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:49.946457-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.10","title":"Implement Secret Masking Regex","description":"Patterns to detect and mask API keys (sk-..., AKIA...). See docs/bitemporal/context/cognitive-ingestion/implement-secret-masking-regex.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:50.35047-06:00","updated_at":"2025-12-06T22:14:36.511186-06:00","closed_at":"2025-12-06T22:14:36.511188-06:00","labels":["ingestion","secrets","security"],"dependencies":[{"issue_id":"the-system-ad2.10","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.350891-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.11","title":"Create Redpanda Producer Configuration","description":"KafkaJS producer setup with idempotency enabled. See docs/bitemporal/context/cognitive-ingestion/create-redpanda-producer-configuration.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:50.394597-06:00","updated_at":"2025-12-06T22:14:59.087098-06:00","closed_at":"2025-12-06T22:14:59.087102-06:00","labels":["ingestion","producer","redpanda"],"dependencies":[{"issue_id":"the-system-ad2.11","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.394957-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.12","title":"Create Redpanda Consumer Configuration","description":"Shared consumer factory for downstream services. See docs/bitemporal/context/cognitive-ingestion/create-redpanda-consumer-configuration.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:50.438598-06:00","updated_at":"2025-12-06T22:14:59.118086-06:00","closed_at":"2025-12-06T22:14:59.118088-06:00","labels":["consumer","ingestion","redpanda"],"dependencies":[{"issue_id":"the-system-ad2.12","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.438911-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.13","title":"Implement Stream De-multiplexer","description":"Ensure ordering by using session_id as Kafka partition key. See docs/bitemporal/context/cognitive-ingestion/implement-stream-de-multiplexer.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:50.484897-06:00","updated_at":"2025-12-06T22:27:34.813106-06:00","closed_at":"2025-12-06T22:27:34.813109-06:00","labels":["ingestion","partitioning","streaming"],"dependencies":[{"issue_id":"the-system-ad2.13","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.485301-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.14","title":"Implement Dead Letter Queue Handler","description":"Route failed parse events to 'ingestion.dead_letter'. See docs/bitemporal/context/cognitive-ingestion/implement-dead-letter-queue-handler.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:48:50.529054-06:00","updated_at":"2025-12-07T00:15:45.628973-06:00","closed_at":"2025-12-07T00:15:45.628975-06:00","labels":["dlq","error-handling","ingestion"],"dependencies":[{"issue_id":"the-system-ad2.14","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.529498-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.2","title":"Implement Stream Protocol Detector","description":"Lightweight fingerprinting logic to identify provider (OpenAI vs Anthropic) from headers/body. See docs/bitemporal/context/cognitive-ingestion/implement-stream-protocol-detector.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:49.991361-06:00","updated_at":"2025-12-06T22:14:36.453173-06:00","closed_at":"2025-12-06T22:14:36.453176-06:00","labels":["ingestion","protocol"],"dependencies":[{"issue_id":"the-system-ad2.2","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:49.991728-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.3","title":"Create Anthropic Parser Strategy","description":"Parser for Anthropic SSE events (message_start, content_block_delta). See docs/bitemporal/context/cognitive-ingestion/create-anthropic-parser-strategy.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:50.036626-06:00","updated_at":"2025-12-06T22:27:15.778399-06:00","closed_at":"2025-12-06T22:27:15.778402-06:00","labels":["anthropic","ingestion","parser"],"dependencies":[{"issue_id":"the-system-ad2.3","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.037092-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.4","title":"Create OpenAI Parser Strategy","description":"Parser for OpenAI chat.completion.chunk objects. See docs/bitemporal/context/cognitive-ingestion/create-openai-parser-strategy.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:50.079563-06:00","updated_at":"2025-12-06T22:27:15.811684-06:00","closed_at":"2025-12-06T22:27:15.811689-06:00","labels":["ingestion","openai","parser"],"dependencies":[{"issue_id":"the-system-ad2.4","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.079982-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.5","title":"Implement Thinking Tag Extractor","description":"Stateful stream transformer to isolate \u003cthinking\u003e blocks. See docs/bitemporal/context/cognitive-ingestion/implement-thinking-tag-extractor.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:48:50.124994-06:00","updated_at":"2025-12-06T23:35:12.643673-06:00","closed_at":"2025-12-06T23:35:12.643676-06:00","labels":["ingestion","thinking","xml"],"dependencies":[{"issue_id":"the-system-ad2.5","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.125395-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.6","title":"Implement Diff Block Extractor","description":"Logic to extract code search/replace blocks from the stream. See docs/bitemporal/context/cognitive-ingestion/implement-diff-block-extractor.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:48:50.169791-06:00","updated_at":"2025-12-06T23:36:10.386842-06:00","closed_at":"2025-12-06T23:36:10.386845-06:00","labels":["code","diff","ingestion"],"dependencies":[{"issue_id":"the-system-ad2.6","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.170164-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.7","title":"Implement Tool Call Extractor","description":"Normalizer for native tool calls into a standard internal format. See docs/bitemporal/context/cognitive-ingestion/implement-tool-call-extractor.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:48:50.21583-06:00","updated_at":"2025-12-06T22:27:15.842937-06:00","closed_at":"2025-12-06T22:27:15.84294-06:00","labels":["ingestion","tool-call"],"dependencies":[{"issue_id":"the-system-ad2.7","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.216209-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.8","title":"Define Normalized Event Structure","description":"ParsedStreamEvent schema (Zod) including 'role' field. See docs/bitemporal/context/cognitive-ingestion/define-normalized-event-structure.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:50.259846-06:00","updated_at":"2025-12-06T22:13:50.406647-06:00","closed_at":"2025-12-06T22:13:50.406648-06:00","labels":["ingestion","schema","zod"],"dependencies":[{"issue_id":"the-system-ad2.8","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.260267-06:00","created_by":"daemon"}]}
{"id":"the-system-ad2.9","title":"Implement PII Redaction Logic","description":"Regex-based scrubber for emails, credit cards, SSNs. See docs/bitemporal/context/cognitive-ingestion/implement-pii-redaction-logic.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:48:50.304318-06:00","updated_at":"2025-12-06T22:14:36.484351-06:00","closed_at":"2025-12-06T22:14:36.484353-06:00","labels":["ingestion","pii","security"],"dependencies":[{"issue_id":"the-system-ad2.9","depends_on_id":"the-system-ad2","type":"parent-child","created_at":"2025-12-06T21:48:50.304763-06:00","created_by":"daemon"}]}
{"id":"the-system-ajl","title":"Update traffic generator script for new node types","description":"Update the traffic generator to create Turn, Reasoning, and FileTouch nodes with the new schema","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-08T03:19:12.927132-06:00","updated_at":"2025-12-08T03:34:05.999996-06:00","closed_at":"2025-12-08T03:34:05.999996-06:00","close_reason":"Closed"}
{"id":"the-system-aku","title":"Add code-specific embedding model","description":"Code embedding currently uses the same text model (e5-small) as text, which is suboptimal for code semantics. Need to switch to nomic-embed-text-v1.5 or similar code model with 8k context, and implement chunking for large files. Ref: select-code-embedding-model.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T02:06:06.160641-06:00","updated_at":"2025-12-08T02:21:00.601945-06:00","closed_at":"2025-12-08T02:21:00.601945-06:00","close_reason":"Closed"}
{"id":"the-system-aml","title":"Implement A/B testing framework for reranker rollout","description":"Feature flags: rerank_enabled_pct, rerank_tier_override. Random assignment per session. Track metrics per variant.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:29.648023-06:00","updated_at":"2025-12-08T23:02:29.648023-06:00"}
{"id":"the-system-aqn","title":"Implement query result Redis cache","description":"Cache reranked results in Redis with 5min TTL. Key: hash(query+filters+rerankTier). Target 30%+ hit rate.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:13.374933-06:00","updated_at":"2025-12-08T23:02:13.374933-06:00","dependencies":[{"issue_id":"the-system-aqn","depends_on_id":"the-system-yvk","type":"blocks","created_at":"2025-12-08T23:03:27.884299-06:00","created_by":"daemon"}]}
{"id":"the-system-ayk","title":"Update API response schema with reranker metadata","description":"Add reranker metadata to search API response.\n\nReference: docs/plans/reranker-implementation.md (Section 7.3)\n\nResponse schema:\n```typescript\ninterface SearchAPIResponse {\n  success: boolean;\n  data: {\n    results: SearchResult[];\n    meta: {\n      query: string;\n      strategy: SearchStrategy;\n      reranker?: {\n        tier: RerankerTier;\n        model: string;\n        latencyMs: number;\n      };\n      totalLatencyMs: number;\n    };\n  };\n}\n```\n\nLocation: apps/interface/app/api/search/route.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:58:33.982851-06:00","updated_at":"2025-12-08T23:19:19.038265-06:00","closed_at":"2025-12-08T23:19:19.038265-06:00","close_reason":"Updated search API with rerank options in request and reranker metadata (tier, model, latencyMs) in response","dependencies":[{"issue_id":"the-system-ayk","depends_on_id":"the-system-8ol","type":"blocks","created_at":"2025-12-08T23:03:26.756607-06:00","created_by":"daemon"}]}
{"id":"the-system-b9g","title":"Add Prometheus metrics for candidate counts","description":"Histogram: search_rerank_candidates with tier labels, buckets [5,10,20,30,50,100]","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:00.653278-06:00","updated_at":"2025-12-08T23:02:00.653278-06:00"}
{"id":"the-system-bkj","title":"[EPIC] Query Routing \u0026 Classification","description":"Query routing system for tier selection.\n\nBounded Context: Query Classification Domain\nReference: docs/plans/reranker-implementation.md (Section 3.2.1, Appendix B)\n\nRoutes queries to appropriate reranker tier based on:\n- Query complexity (length, operators)\n- Content type filter (code vs text)\n- User tier/subscription\n- Latency budget\n\nRouting heuristics:\n- Quoted strings ‚Üí accurate tier\n- Code patterns ‚Üí code tier\n- Long/complex queries ‚Üí accurate tier\n- Simple queries ‚Üí fast tier","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T22:55:51.528438-06:00","updated_at":"2025-12-08T22:55:51.528438-06:00","dependencies":[{"issue_id":"the-system-bkj","depends_on_id":"the-system-020","type":"blocks","created_at":"2025-12-08T23:02:51.332623-06:00","created_by":"daemon"}]}
{"id":"the-system-bob","title":"Test Qdrant hybrid search with SPLADE vectors","description":"Integration test for Qdrant hybrid search using SPLADE sparse vectors. Verify synonym handling and vocabulary mismatch improvements over BM25.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-08T19:25:08.791888-06:00","updated_at":"2025-12-08T20:20:17.320417-06:00","closed_at":"2025-12-08T20:20:17.320417-06:00","close_reason":"Integration tests pass: 10/10 tests verify SPLADE hybrid search with synonym handling and vocabulary mismatch improvements","dependencies":[{"issue_id":"the-system-bob","depends_on_id":"the-system-1v5","type":"blocks","created_at":"2025-12-08T19:25:16.457402-06:00","created_by":"daemon"}]}
{"id":"the-system-bxe","title":"Add ms-marco-MiniLM-L-6-v2 fast reranker model","description":"Add fast-tier reranker using ms-marco-MiniLM-L-6-v2.\n\nReference: docs/plans/reranker-implementation.md (Section 2.2, Tier 1)\n\nModel: Xenova/ms-marco-MiniLM-L-6-v2\n- 22M parameters\n- Target latency: \u003c 50ms\n- Use case: All queries, fast default\n\nImplementation:\n- Add model constant to reranker config\n- Implement fast reranker singleton\n- Use q8 quantization for speed\n\nLocation: packages/search-core/src/services/fast-reranker.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:55:33.760038-06:00","updated_at":"2025-12-08T22:55:33.760038-06:00"}
{"id":"the-system-byw","title":"Fix tool extraction from LLM output","description":"The DecisionEngine in control/src/engine/decision.ts may not properly extract tool calls from LLM generateText response. Need to verify tool_calls parsing and handle edge cases where structured output is malformed. Ref: define-decision-loop-logic.md","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-08T02:06:09.319012-06:00","updated_at":"2025-12-08T02:31:05.742627-06:00","closed_at":"2025-12-08T02:31:05.742627-06:00","close_reason":"Implemented tool conversion and extraction in DecisionEngine"}
{"id":"the-system-caz","title":"Evaluate interface nodes: add Cost, Session, GitSnapshot, Timing nodes?","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T18:50:45.476212-06:00","updated_at":"2025-12-08T19:01:43.324894-06:00","closed_at":"2025-12-08T19:01:43.324894-06:00","close_reason":"Enhanced TurnNode with cache, cost, timing, and git fields instead of separate nodes"}
{"id":"the-system-cnc","title":"[EPIC] ColBERT Late Interaction Reranking","description":"ColBERT late interaction for billion-scale efficiency.\n\nBounded Context: Late Interaction Domain\nReference: docs/plans/reranker-implementation.md (Section 3.2.3, Phase 3)\n\nColBERT enables:\n- Precomputed document token embeddings\n- MaxSim scoring at query time\n- 180x fewer FLOPs than cross-encoders at k=10\n- Native Qdrant multivector support\n\nModel: jinaai/jina-colbert-v2 (559M, 89 languages)\n\nThis is the scale path for billion-event search.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T22:56:19.020164-06:00","updated_at":"2025-12-08T22:56:19.020164-06:00","dependencies":[{"issue_id":"the-system-cnc","depends_on_id":"the-system-020","type":"blocks","created_at":"2025-12-08T23:02:49.04013-06:00","created_by":"daemon"}]}
{"id":"the-system-djr","title":"Research SPLADE-distilbert ONNX conversion","description":"If sparse retrieval quality is insufficient: 1) Convert SPLADE-distilbert to ONNX, 2) Implement SpladePooling in JavaScript, 3) Benchmark against improved BM25. See docs/sparse-embedding-evaluation.md for research findings, available models (naver/splade-v3, naver/splade-v3-distilbert), implementation path, and estimated effort (3-5 days).","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-08T02:53:59.382213-06:00","updated_at":"2025-12-08T19:17:58.831261-06:00","closed_at":"2025-12-08T19:17:58.831261-06:00","close_reason":"Research complete: Found 13+ pre-converted SPLADE ONNX models on HuggingFace. Recommended sparse-encoder-testing/splade-bert-tiny-nq-onnx (4.42M params). Implementation effort reduced from 3-5 days to 1-2 days."}
{"id":"the-system-dkx","title":"Implement ColBERTEmbedder using jina-colbert-v2","description":"Implement ColBERT embedder for token-level representations.\n\nReference: docs/plans/reranker-implementation.md (Section 3.2.3, Phase 3)\n\nModel: jinaai/jina-colbert-v2\n- Token dimension: 128\n- Supports 89 languages\n- Aggressive quantization (2-bit: 36‚Üí20 bytes per vector)\n\nInterface:\n```typescript\nexport class ColBERTEmbedder {\n  // Encode document into token-level embeddings\n  async encodeDocument(content: string): Promise\u003cFloat32Array[]\u003e;\n  \n  // Encode query for MaxSim scoring\n  async encodeQuery(query: string): Promise\u003cFloat32Array[]\u003e;\n}\n```\n\nLocation: packages/search-core/src/services/colbert-embedder.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:56:27.758309-06:00","updated_at":"2025-12-08T22:56:27.758309-06:00"}
{"id":"the-system-dn0","title":"Add RERANKED indicator badge to search results header","description":"Add visual indicator when results have been reranked.\n\nReference: docs/plans/reranker-implementation.md (Section 8.2)\n\nImplementation:\n```typescript\n// In SearchResults header\n{meta?.reranker \u0026\u0026 (\n  \u003cspan \n    className=\"rerank-badge\" \n    title={\\`Reranked by \\${meta.reranker.model}\\`}\n  \u003e\n    RERANKED ({meta.reranker.latencyMs}ms)\n  \u003c/span\u003e\n)}\n```\n\nStyling:\n- Cyan/teal badge consistent with design system\n- Show model name on hover\n- Display latency for transparency\n\nLocation: apps/interface/app/components/SearchResults.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:59:00.191152-06:00","updated_at":"2025-12-08T23:23:53.646996-06:00","closed_at":"2025-12-08T23:23:53.646996-06:00","close_reason":"Added RERANKED badge showing latency in search results header, with model/tier tooltip, magenta styling matching REL score indicator"}
{"id":"the-system-dzq","title":"Benchmark SPLADE vs BM25Sparse","description":"Create benchmark script comparing latency, sparsity, and retrieval quality between SPLADE and BM25Sparse implementations. Test with real search queries. Document results.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-08T19:25:07.625165-06:00","updated_at":"2025-12-08T19:47:14.158554-06:00","closed_at":"2025-12-08T19:47:14.158554-06:00","close_reason":"Benchmark complete: SPLADE 2ms/192dims vs BM25 0.04ms/11dims - SPLADE wins on semantic matching quality","dependencies":[{"issue_id":"the-system-dzq","depends_on_id":"the-system-1v5","type":"blocks","created_at":"2025-12-08T19:25:16.424498-06:00","created_by":"daemon"}]}
{"id":"the-system-e5r","title":"Add FileTouchNode schema to memory-core","description":"Create FileTouchNode with file_path (indexed), action (read/edit/create/delete), diff_preview","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T03:13:54.365247-06:00","updated_at":"2025-12-08T03:18:11.196582-06:00","closed_at":"2025-12-08T03:18:11.196582-06:00","close_reason":"Closed","dependencies":[{"issue_id":"the-system-e5r","depends_on_id":"the-system-3sh","type":"blocks","created_at":"2025-12-08T03:14:04.515795-06:00","created_by":"daemon"}]}
{"id":"the-system-efo","title":"[EPIC] Configuration Management","description":"Configuration for reranking system.\n\nBounded Context: Configuration Domain\nReference: docs/plans/reranker-implementation.md (Section 9)\n\nConfiguration levels:\n- Environment variables\n- Runtime configuration\n- Tier-specific settings\n- Routing heuristics\n\nEnables flexible deployment and tuning.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T22:59:08.223991-06:00","updated_at":"2025-12-08T22:59:08.223991-06:00","dependencies":[{"issue_id":"the-system-efo","depends_on_id":"the-system-020","type":"blocks","created_at":"2025-12-08T23:03:06.734126-06:00","created_by":"daemon"}]}
{"id":"the-system-ely","title":"Add Prometheus metrics for score improvement","description":"Histogram: search_rerank_score_delta tracking top result score improvement from reranking","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:01.69805-06:00","updated_at":"2025-12-08T23:02:01.69805-06:00"}
{"id":"the-system-epl","title":"[EPIC] UI/Presentation Layer Updates","description":"UI updates for reranking display.\n\nBounded Context: Presentation Domain\nReference: docs/plans/reranker-implementation.md (Section 8)\n\nUpdates:\n- Show REL score when reranked (instead of RRF)\n- Display reranking indicator badge\n- Update score bar component\n- Show reranker metadata in response\n\nUser should see transparency into ranking method.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T22:58:41.869302-06:00","updated_at":"2025-12-08T22:58:41.869302-06:00","dependencies":[{"issue_id":"the-system-epl","depends_on_id":"the-system-7xi","type":"blocks","created_at":"2025-12-08T23:02:48.023063-06:00","created_by":"daemon"}]}
{"id":"the-system-f36","title":"Add cache metrics and hit rate tracking","description":"Track cache_hits, cache_misses, cache_evictions counters. Expose hit_rate gauge.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:15.883625-06:00","updated_at":"2025-12-08T23:02:15.883625-06:00"}
{"id":"the-system-g0a","title":"Add xAI API client for grok-4-1-fast-reasoning","description":"Implement xAI API client for LLM reranking.\n\nReference: docs/plans/reranker-implementation.md (Section 9.1)\n\nEnvironment variables:\n- XAI_API_KEY: API key for xAI\n- LLM_RERANK_MODEL: grok-4-1-fast-reasoning\n\nClient requirements:\n- Async API calls\n- Rate limiting\n- Error handling and retries\n- Cost tracking per query\n\nLocation: packages/search-core/src/clients/xai-client.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:57:32.249662-06:00","updated_at":"2025-12-08T22:57:32.249662-06:00"}
{"id":"the-system-g0m","title":"Implement Wasm sandbox for code execution isolation","description":"The original Wassette (Wasm sandbox) concept is not implemented. Execution service operates directly on VFS without isolation. Need to integrate Wasmtime or similar, define capability-based permissions, enforce memory/CPU limits. Ref: define-wassette-runtime-configuration.md, develop-sandbox-security-policy.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T02:06:05.270576-06:00","updated_at":"2025-12-08T02:07:44.391937-06:00","closed_at":"2025-12-08T02:07:44.391937-06:00","close_reason":"Already implemented - Wassette binary installed at ~/.local/bin/wassette and integrated via McpToolAdapter in control/src/index.ts. Integration tests exist at tests/e2e/wassette_integration.test.ts"}
{"id":"the-system-gct","title":"Add rate limiting for LLM reranker tier","description":"Hard limit: 100 LLM rerank requests/hour per user. Track cost attribution. Alert on budget exceeded.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:30.438042-06:00","updated_at":"2025-12-08T23:02:30.438042-06:00"}
{"id":"the-system-gln","title":"Add Test Coverage: packages/storage","description":"Add comprehensive unit and integration tests for packages/storage","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T01:51:16.737233-06:00","updated_at":"2025-12-07T02:00:51.894829-06:00","closed_at":"2025-12-07T02:00:51.894831-06:00","labels":["packages","storage","testing"]}
{"id":"the-system-hcz","title":"[EPIC] SearchRetriever Integration","description":"Integrate reranking into SearchRetriever pipeline.\n\nBounded Context: Retrieval Integration Domain\nReference: docs/plans/reranker-implementation.md (Section 4)\n\nThis is Phase 1 - the critical path to enable reranking.\n\nIntegration points:\n- Add rerank option to SearchQuery interface\n- Call reranker after hybrid search\n- Merge scores and return enriched results\n- Circuit breaker for latency protection\n\nThis epic wires everything together.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T22:57:41.084625-06:00","updated_at":"2025-12-08T22:57:41.084625-06:00","dependencies":[{"issue_id":"the-system-hcz","depends_on_id":"the-system-020","type":"blocks","created_at":"2025-12-08T23:02:46.137633-06:00","created_by":"daemon"}]}
{"id":"the-system-hq0","title":"Write unit tests for ColBERTReranker","description":"Test MaxSim scoring, document encoding, multivector handling. File: packages/search-core/src/services/__tests__/colbert-reranker.test.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:01:45.580775-06:00","updated_at":"2025-12-08T23:01:45.580775-06:00"}
{"id":"the-system-i8q","title":"Implement score merging strategy","description":"Implement score merging for RRF + reranker scores.\n\nReference: docs/plans/reranker-implementation.md (Section 4.2)\n\nStrategy options:\n- Option A: Replace with reranker score\n- Option B: Weighted combination  \n- Option C: Rank-based (reranker ordering, preserve both scores)\n\nRecommendation: Use Option C\n- Reranker determines final ordering\n- Preserve both scores in response for transparency\n\nInterface:\n```typescript\ninterface MergedResult {\n  rrfScore: number;\n  rerankerScore: number;\n  finalScore: number;\n}\n```\n\nLocation: packages/search-core/src/services/score-merger.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:55:42.774178-06:00","updated_at":"2025-12-08T22:55:42.774178-06:00"}
{"id":"the-system-ipu","title":"Create useSearch hook for search API integration","description":"Create a React hook for search API integration with debouncing and SWR caching.\n\nReference: docs/plans/search-ui.md (Phase 3: API Integration)\n\nNew file: apps/interface/app/hooks/useSearch.ts\n\nInterface:\n- Input: query string, optional UseSearchOptions\n- Output: { results, isLoading, error }\n\nUseSearchOptions:\n- debounceMs: number (default 300) - prevent excessive API calls\n- limit: number (default 10) - max results to return\n- filters: { type?: 'thought' | 'code' | 'doc', session_id?: string }\n\nSearchResult shape (from Qdrant):\n- id: string\n- score: number\n- payload: { content, node_id, session_id, type, timestamp, file_path? }\n\nImplementation details:\n- Use SWR for caching and request deduplication (already in package.json)\n- Debounce query changes to avoid hammering API during typing\n- Call POST /api/search with { query, limit, filters }\n- Handle loading and error states\n- Return empty array when query is empty or too short (\u003c 2 chars)\n\nThe hook should be strategy-agnostic - the API route already defaults to hybrid search.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T21:38:43.503504-06:00","updated_at":"2025-12-08T21:53:58.042214-06:00","closed_at":"2025-12-08T21:53:58.042214-06:00","close_reason":"Created useSearch hook with SWR, debouncing, UUID detection, and search mode management","dependencies":[{"issue_id":"the-system-ipu","depends_on_id":"the-system-xr2","type":"blocks","created_at":"2025-12-08T21:38:51.000726-06:00","created_by":"daemon"}]}
{"id":"the-system-iqt","title":"Implement ColBERTReranker with MaxSim scoring","description":"Implement ColBERT reranker using late interaction scoring.\n\nReference: docs/plans/reranker-implementation.md (Section 3.2.3)\n\nMaxSim algorithm:\n- For each query token, compute similarity with every document token\n- Keep only max similarity per query token\n- Sum all token-level max scores into final relevance\n\nInterface:\n```typescript\nexport class ColBERTReranker {\n  // Fast query-time scoring using cached doc embeddings\n  async rerank(\n    query: string,\n    candidates: CachedDocumentCandidate[],\n    topK: number\n  ): Promise\u003cRerankResult[]\u003e;\n}\n```\n\nPerformance target: ~20ms for 30 docs (with precomputed)\n\nLocation: packages/search-core/src/services/colbert-reranker.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:56:37.210825-06:00","updated_at":"2025-12-08T22:56:37.210825-06:00","dependencies":[{"issue_id":"the-system-iqt","depends_on_id":"the-system-dkx","type":"blocks","created_at":"2025-12-08T23:03:10.407399-06:00","created_by":"daemon"}]}
{"id":"the-system-iv9","title":"Implement RerankerRouter class","description":"Implement RerankerRouter for query-based tier selection.\n\nReference: docs/plans/reranker-implementation.md (Section 3.2.1)\n\nInterface:\n```typescript\nexport type RerankerTier = \"fast\" | \"accurate\" | \"code\" | \"llm\";\n\nexport interface RerankerRoutingResult {\n  tier: RerankerTier;\n  reranker: string;\n  maxCandidates: number;\n  reason: string;\n}\n\nexport class RerankerRouter {\n  route(query: string, options: RoutingOptions): RerankerRoutingResult;\n}\n```\n\nRouting rules:\n- Code patterns (function(), class, =\u003e) ‚Üí code tier\n- Complex queries (\u003e50 chars, operators) ‚Üí accurate tier\n- Agentic patterns (tool, execute) ‚Üí accurate tier\n- Default ‚Üí fast tier\n\nLocation: packages/search-core/src/services/reranker-router.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:56:01.207548-06:00","updated_at":"2025-12-08T22:56:01.207548-06:00"}
{"id":"the-system-izg","title":"Implement GCS blob store adapter","description":"GCSBlobStore in storage/src/blob.ts is a stub with console.log only. Need to implement actual GCS operations using @google-cloud/storage for production blob storage. Ref: create-blob-storage-adapter.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T02:06:29.12036-06:00","updated_at":"2025-12-08T02:41:05.652671-06:00","closed_at":"2025-12-08T02:41:05.652671-06:00","close_reason":"Implemented real GCS operations using @google-cloud/storage with lazy loading and fallback"}
{"id":"the-system-jle","title":"Add Test Coverage: packages/vfs","description":"Add comprehensive unit and integration tests for packages/vfs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T01:51:16.790893-06:00","updated_at":"2025-12-07T02:01:21.212578-06:00","closed_at":"2025-12-07T02:01:21.212578-06:00","close_reason":"Packages/vfs already has comprehensive tests.","labels":["packages","testing","vfs"]}
{"id":"the-system-jpt","title":"Optimize batch graph pruning","description":"GraphPruner uses single-threaded deletion which may be slow on large graphs. Need to implement batched deletion with configurable batch sizes to avoid Redis timeouts. Ref: implement-graph-pruning-strategy.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T02:06:28.17326-06:00","updated_at":"2025-12-08T02:39:05.558051-06:00","closed_at":"2025-12-08T02:39:05.558051-06:00","close_reason":"Implemented batched deletion with configurable batchSize and maxBatches options"}
{"id":"the-system-kdx","title":"Create SearchInput component with UUID detection","description":"Create a smart search input that detects UUIDs vs natural language queries.\n\nReference: docs/plans/search-ui.md (Phase 1: SearchInput Component)\n\nNew file: apps/interface/app/components/SearchInput.tsx\n\nFeatures:\n- Single input field replacing the current UUID-only input on homepage\n- Placeholder: \"Search thoughts, code, or enter session UUID...\"\n- UUID detection: regex /^[0-9a-f-]{36}$/i triggers \"Go to session\" mode\n- Natural language: triggers search mode after debounce\n\nComponent state:\n- query: string - current input value\n- mode: 'idle' | 'uuid' | 'search' - determined by input pattern\n\nProps:\n- onSearch: (query: string) =\u003e void - callback when search should execute\n- onNavigateSession: (sessionId: string) =\u003e void - callback for UUID navigation\n\nVisual design (matching existing glassmorphism):\n- Background: rgba(15, 20, 30, 0.7)\n- Border: 1px solid rgba(100, 116, 139, 0.25)\n- Focus border: rgba(0, 245, 212, 0.4) (cyan accent)\n- Focus glow: box-shadow with cyan\n- Font: JetBrains Mono, 13px\n- Search icon: lucide-react Search icon, rgb(148, 163, 184)\n\nKeyboard shortcuts:\n- \"/\" focuses the input (global listener)\n- Enter with UUID navigates to session\n- Enter with search query is optional (search is live)\n\nThis component is UI-only and does not call the API directly - it uses callbacks.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T21:39:06.939115-06:00","updated_at":"2025-12-08T21:53:40.195809-06:00","closed_at":"2025-12-08T21:53:40.195809-06:00","close_reason":"Created SearchInput component with UUID detection, keyboard shortcut (/), and smart mode switching"}
{"id":"the-system-kl6","title":"[EPIC] LLM Listwise Reranking","description":"LLM-based listwise reranking for premium queries.\n\nBounded Context: LLM Reranking Domain\nReference: docs/plans/reranker-implementation.md (Section 3.2.4, Phase 4)\n\nUses grok-4-1-fast-reasoning via xAI API for:\n- Listwise comparison ranking\n- Complex reasoning queries\n- High-stakes search results\n\nAdvantages over pointwise:\n- Sees all candidates in context\n- Can make relative comparisons\n- Better for complex reasoning queries\n\nReserved for premium tier due to cost/latency.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T22:57:06.019306-06:00","updated_at":"2025-12-08T22:57:06.019306-06:00","dependencies":[{"issue_id":"the-system-kl6","depends_on_id":"the-system-bkj","type":"blocks","created_at":"2025-12-08T23:02:50.403079-06:00","created_by":"daemon"}]}
{"id":"the-system-lwe","title":"Update ScoreBar to show REL vs RRF based on rerank status","description":"Update score bar component to differentiate reranked vs non-reranked results.\n\nReference: docs/plans/reranker-implementation.md (Section 8.1)\n\nImplementation:\n```typescript\nfunction ScoreBar({ result }: { result: SearchResult }) {\n  const hasRerank = result.rerankerScore !== undefined;\n\n  return (\n    \u003cdiv\u003e\n      {hasRerank ? (\n        \u003c\u003e\n          \u003cspan title=\"Cross-encoder relevance score\"\u003eREL\u003c/span\u003e\n          \u003cBar score={result.rerankerScore} /\u003e\n          \u003cspan\u003e{Math.round(result.rerankerScore * 100)}%\u003c/span\u003e\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          \u003cspan title=\"Reciprocal Rank Fusion score\"\u003eRRF\u003c/span\u003e\n          \u003cBar score={result.rrfScore} /\u003e\n          \u003cspan\u003e{Math.round(result.rrfScore * 100)}%\u003c/span\u003e\n        \u003c/\u003e\n      )}\n    \u003c/div\u003e\n  );\n}\n```\n\nLocation: apps/interface/app/components/SearchResults.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:58:51.034902-06:00","updated_at":"2025-12-08T23:21:34.595427-06:00","closed_at":"2025-12-08T23:21:34.595427-06:00","close_reason":"Updated ScoreBar to show REL (magenta glow) for reranked results vs RRF (cyan) for non-reranked, with distinct gradients and tooltips"}
{"id":"the-system-mcb","title":"Implement context assembly for agent loops","description":"The ContextAssembler in control/src/context/assembler.ts returns hardcoded 'System: You are Engram.' instead of assembling actual context. Need to: query search service for relevant memories, fetch recent session history, implement sliding window with token counting. Ref: implement-context-window-manager.md","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-08T02:05:39.422099-06:00","updated_at":"2025-12-08T02:17:41.692016-06:00","closed_at":"2025-12-08T02:17:41.692016-06:00","close_reason":"Closed","dependencies":[{"issue_id":"the-system-mcb","depends_on_id":"the-system-q20","type":"blocks","created_at":"2025-12-08T02:06:47.444388-06:00","created_by":"daemon"}]}
{"id":"the-system-mgk","title":"[EPIC] Caching \u0026 Optimization","description":"Document representation caching, query result caching, and async reranking (Phase 5)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-08T23:01:27.738605-06:00","updated_at":"2025-12-08T23:01:27.738605-06:00","dependencies":[{"issue_id":"the-system-mgk","depends_on_id":"the-system-hcz","type":"blocks","created_at":"2025-12-08T23:03:06.001547-06:00","created_by":"daemon"}]}
{"id":"the-system-ml6","title":"Integrate search components into homepage","description":"Integrate SearchInput and SearchResults into the homepage, replacing the UUID-only input.\n\nReference: docs/plans/search-ui.md (Phase 4: Homepage Integration)\n\nModified file: apps/interface/app/page.tsx\n\nChanges:\n1. Remove the existing UUID input form (lines 326-381)\n2. Add SearchInput component in its place\n3. Add state to track current search query and results\n4. Wire up useSearch hook with the query\n5. Conditionally render:\n   - SearchResults when query has results\n   - SessionBrowser when query is empty (current behavior)\n6. Add global \"/\" keyboard shortcut to focus search input\n\nState to add:\n- searchQuery: string\n- Pass to useSearch hook\n- Pass to SearchInput as controlled input\n\nLayout flow:\n- Header (unchanged)\n- SearchInput (new, replaces UUID form)\n- SearchResults OR SessionBrowser (conditional)\n- Footer (unchanged)\n\nBehavior:\n- Page loads: shows SessionBrowser (existing behavior)\n- User types search: shows SearchResults after debounce\n- User clears search: returns to SessionBrowser\n- User enters UUID: navigates to session (existing behavior)\n\nImport new components:\n- import { SearchInput } from \"./components/SearchInput\"\n- import { SearchResults } from \"./components/SearchResults\"\n- import { useSearch } from \"./hooks/useSearch\"\n\nDepends on: SearchInput, SearchResults, and useSearch hook must all be complete.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T21:39:36.624523-06:00","updated_at":"2025-12-08T21:53:58.081378-06:00","closed_at":"2025-12-08T21:53:58.081378-06:00","close_reason":"Integrated SearchInput and SearchResults into homepage with conditional rendering","dependencies":[{"issue_id":"the-system-ml6","depends_on_id":"the-system-kdx","type":"blocks","created_at":"2025-12-08T21:39:44.930567-06:00","created_by":"daemon"},{"issue_id":"the-system-ml6","depends_on_id":"the-system-2a6","type":"blocks","created_at":"2025-12-08T21:39:44.961809-06:00","created_by":"daemon"},{"issue_id":"the-system-ml6","depends_on_id":"the-system-ipu","type":"blocks","created_at":"2025-12-08T21:39:44.991398-06:00","created_by":"daemon"}]}
{"id":"the-system-mvx","title":"Update memory app ingestion to create Turn/Reasoning/FileTouch nodes","description":"Modify apps/memory to aggregate tokens into Turns, extract reasoning blocks, track file touches","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T03:13:57.810188-06:00","updated_at":"2025-12-08T03:24:06.494292-06:00","closed_at":"2025-12-08T03:24:06.494292-06:00","close_reason":"Closed","dependencies":[{"issue_id":"the-system-mvx","depends_on_id":"the-system-nob","type":"blocks","created_at":"2025-12-08T03:14:04.631055-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y","title":"Bounded Context: Bitemporal Memory","description":"The 'Hippocampus'. Manages the knowledge graph, bitemporal logic, and persistence. See docs/bitemporal/context/bitemporal-memory/","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:47:42.394915-06:00","updated_at":"2025-12-06T22:33:15.150169-06:00","closed_at":"2025-12-06T22:33:15.150172-06:00","labels":["context","falkordb","memory"]}
{"id":"the-system-n7y.1","title":"Define FalkorDB Project Structure","description":"Setup packages/memory-core and apps/memory structure. See docs/bitemporal/context/bitemporal-memory/define-falkordb-project-structure.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.03288-06:00","updated_at":"2025-12-06T22:16:45.364281-06:00","closed_at":"2025-12-06T22:16:45.364284-06:00","labels":["memory","redis","structure"],"dependencies":[{"issue_id":"the-system-n7y.1","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.033279-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.10","title":"Define Snapshot Node Schema","description":"Zod schema for SnapshotNode (VFS state). See docs/bitemporal/context/bitemporal-memory/define-snapshot-node-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.414833-06:00","updated_at":"2025-12-06T22:18:30.865325-06:00","closed_at":"2025-12-06T22:18:30.865327-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.10","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.415209-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.11","title":"Define Standard Edge Schemas","description":"Zod schemas for NEXT, TRIGGERS, MODIFIES, etc. See docs/bitemporal/context/bitemporal-memory/define-standard-edge-schemas.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.459816-06:00","updated_at":"2025-12-06T22:18:30.892083-06:00","closed_at":"2025-12-06T22:18:30.892085-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.11","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.460217-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.12","title":"Implement FalkorDB Connection Manager","description":"Redis client wrapper ensuring graph module is loaded. See docs/bitemporal/context/bitemporal-memory/implement-falkordb-connection-manager.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.502096-06:00","updated_at":"2025-12-06T22:16:16.310596-06:00","closed_at":"2025-12-06T22:16:16.310599-06:00","labels":["infrastructure","memory","redis"],"dependencies":[{"issue_id":"the-system-n7y.12","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.502466-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.13","title":"Develop Bitemporal Query Builder","description":"Fluent API to inject temporal WHERE clauses into Cypher. See docs/bitemporal/context/bitemporal-memory/develop-bitemporal-query-builder.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:50:33.547233-06:00","updated_at":"2025-12-06T22:25:41.607896-06:00","closed_at":"2025-12-06T22:25:41.607899-06:00","labels":["builder","cypher","memory"],"dependencies":[{"issue_id":"the-system-n7y.13","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.547662-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.14","title":"Create Blob Storage Adapter","description":"Adapter for offloading large text to FS/GCS. See docs/bitemporal/context/bitemporal-memory/create-blob-storage-adapter.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.590197-06:00","updated_at":"2025-12-06T22:25:00.383421-06:00","closed_at":"2025-12-06T22:25:00.383424-06:00","labels":["blob","memory","storage"],"dependencies":[{"issue_id":"the-system-n7y.14","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.590608-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.15","title":"Implement Graph Node Writer","description":"Service to write nodes with current transaction time. See docs/bitemporal/context/bitemporal-memory/implement-graph-node-writer.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.633077-06:00","updated_at":"2025-12-06T22:25:22.979015-06:00","closed_at":"2025-12-06T22:25:22.979018-06:00","labels":["cypher","memory","writer"],"dependencies":[{"issue_id":"the-system-n7y.15","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.63344-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.16","title":"Implement Graph Edge Writer","description":"Service to write edges with temporal props. See docs/bitemporal/context/bitemporal-memory/implement-graph-edge-writer.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.676429-06:00","updated_at":"2025-12-06T22:25:23.009856-06:00","closed_at":"2025-12-06T22:25:23.009858-06:00","labels":["cypher","memory","writer"],"dependencies":[{"issue_id":"the-system-n7y.16","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.676784-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.17","title":"Implement Transaction Time Logic","description":"Logic for 'Correction' (Append-Only + REPLACES edge). See docs/bitemporal/context/bitemporal-memory/implement-transaction-time-logic.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:50:33.718919-06:00","updated_at":"2025-12-06T22:26:05.365755-06:00","closed_at":"2025-12-06T22:26:05.365759-06:00","labels":["logic","memory","temporal"],"dependencies":[{"issue_id":"the-system-n7y.17","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.719335-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.18","title":"Implement Valid Time Logic","description":"Support for inserting facts with custom valid-time windows. See docs/bitemporal/context/bitemporal-memory/implement-valid-time-logic.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:50:33.761664-06:00","updated_at":"2025-12-06T22:26:05.395849-06:00","closed_at":"2025-12-06T22:26:05.395851-06:00","labels":["logic","memory","temporal"],"dependencies":[{"issue_id":"the-system-n7y.18","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.762095-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.19","title":"Create Graphiti MCP Server Wrapper","description":"Expose memory capabilities via MCP (read_graph, search). See docs/bitemporal/context/bitemporal-memory/create-graphiti-mcp-server-wrapper.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:50:33.807801-06:00","updated_at":"2025-12-06T22:26:39.91986-06:00","closed_at":"2025-12-06T22:26:39.919864-06:00","labels":["api","mcp","memory"],"dependencies":[{"issue_id":"the-system-n7y.19","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.808232-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.2","title":"Implement Bitemporal Timestamp Logic","description":"Time utility for vt_start/end and tt_start/end logic. See docs/bitemporal/context/bitemporal-memory/implement-bitemporal-timestamp-logic.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.075239-06:00","updated_at":"2025-12-06T22:16:45.395585-06:00","closed_at":"2025-12-06T22:16:45.395588-06:00","labels":["logic","memory","temporal"],"dependencies":[{"issue_id":"the-system-n7y.2","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.075584-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.20","title":"Implement Graph Pruning Strategy","description":"Cron job to retire old transaction history to cold storage. See docs/bitemporal/context/bitemporal-memory/implement-graph-pruning-strategy.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:50:33.849582-06:00","updated_at":"2025-12-06T23:57:25.889551-06:00","closed_at":"2025-12-06T23:57:25.889554-06:00","labels":["maintenance","memory","pruning"],"dependencies":[{"issue_id":"the-system-n7y.20","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.850043-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.21","title":"Develop Node Merging Logic","description":"SAME_AS edge logic for entity resolution. See docs/bitemporal/context/bitemporal-memory/develop-node-merging-logic.md","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-06T21:50:33.892839-06:00","updated_at":"2025-12-07T01:19:13.419722-06:00","closed_at":"2025-12-07T01:19:13.419722-06:00","close_reason":"Implemented GraphMerger in @the-soul/memory-core to merge duplicate nodes by rewiring relationships.","labels":["logic","memory","merge"],"dependencies":[{"issue_id":"the-system-n7y.21","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.893204-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.3","title":"Define Base Node Model","description":"Zod schema for BaseNode with ULID and Bitemporal fields. See docs/bitemporal/context/bitemporal-memory/define-base-node-model.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.118314-06:00","updated_at":"2025-12-06T22:16:45.426165-06:00","closed_at":"2025-12-06T22:16:45.426168-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.3","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.118687-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.4","title":"Define Session Node Schema","description":"Zod schema for SessionNode. See docs/bitemporal/context/bitemporal-memory/define-session-node-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.159325-06:00","updated_at":"2025-12-06T22:18:30.693834-06:00","closed_at":"2025-12-06T22:18:30.693836-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.4","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.159681-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.5","title":"Define Thought Node Schema","description":"Zod schema for ThoughtNode including blob_ref. See docs/bitemporal/context/bitemporal-memory/define-thought-node-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.203394-06:00","updated_at":"2025-12-06T22:18:30.724025-06:00","closed_at":"2025-12-06T22:18:30.724027-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.5","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.203771-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.6","title":"Define ToolCall Node Schema","description":"Zod schema for ToolCallNode. See docs/bitemporal/context/bitemporal-memory/define-tool-call-node-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.243789-06:00","updated_at":"2025-12-06T22:18:30.751905-06:00","closed_at":"2025-12-06T22:18:30.751907-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.6","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.244099-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.7","title":"Define CodeArtifact Node Schema","description":"Zod schema for CodeArtifactNode. See docs/bitemporal/context/bitemporal-memory/define-code-artifact-node-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.288416-06:00","updated_at":"2025-12-06T22:18:30.780785-06:00","closed_at":"2025-12-06T22:18:30.780787-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.7","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.288799-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.8","title":"Define DiffHunk Node Schema","description":"Zod schema for DiffHunkNode. See docs/bitemporal/context/bitemporal-memory/define-diff-hunk-node-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.330499-06:00","updated_at":"2025-12-06T22:18:30.807635-06:00","closed_at":"2025-12-06T22:18:30.807637-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.8","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.33086-06:00","created_by":"daemon"}]}
{"id":"the-system-n7y.9","title":"Define Observation Node Schema","description":"Zod schema for ObservationNode. See docs/bitemporal/context/bitemporal-memory/define-observation-node-schema.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:50:33.372577-06:00","updated_at":"2025-12-06T22:18:30.835869-06:00","closed_at":"2025-12-06T22:18:30.835872-06:00","labels":["memory","schema","zod"],"dependencies":[{"issue_id":"the-system-n7y.9","depends_on_id":"the-system-n7y","type":"parent-child","created_at":"2025-12-06T21:50:33.372993-06:00","created_by":"daemon"}]}
{"id":"the-system-nob","title":"Update edge types for new hierarchy","description":"Add HAS_TURN, CONTAINS, TOUCHES edges. Session‚ÜíTurn‚ÜíReasoning/FileTouch hierarchy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T03:13:56.705827-06:00","updated_at":"2025-12-08T03:19:20.848304-06:00","closed_at":"2025-12-08T03:19:20.848304-06:00","close_reason":"Closed","dependencies":[{"issue_id":"the-system-nob","depends_on_id":"the-system-3sh","type":"blocks","created_at":"2025-12-08T03:14:04.593217-06:00","created_by":"daemon"}]}
{"id":"the-system-nxc","title":"Implement Custom Logger Package","description":"Refactor @the-soul/logger to match the provided reference implementation using pino, redaction, and structured logging. Ensure all apps use it.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T01:06:06.999517-06:00","updated_at":"2025-12-07T01:08:37.608613-06:00","closed_at":"2025-12-07T01:08:37.608613-06:00","close_reason":"Refactored @the-soul/logger to match reference implementation. Updated apps/interface to use it and fixed Next.js build configuration."}
{"id":"the-system-oan","title":"Evaluate Hugging Face models for sparse embeddings","description":"Investigate using Hugging Face's SPLADE or other sparse embedding models via transformers.js as an alternative to the current BM25 implementation. Current BM25Sparse uses simple TF-based scoring without IDF. Consider: 1) SPLADE models for learned sparse embeddings 2) FastEmbed integration if available for JS 3) Proper vocabulary-based tokenization instead of hash-based indexing. Ref: text-embedder.ts BM25Sparse class","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T02:15:39.264419-06:00","updated_at":"2025-12-08T02:49:37.421264-06:00","closed_at":"2025-12-08T02:49:37.421264-06:00","close_reason":"Evaluated SPLADE models, improved BM25 with BERT tokenizer, documented alternatives"}
{"id":"the-system-otm","title":"Wire reranker call into SearchRetriever.search()","description":"Integrate reranking stage into SearchRetriever.search() method.\n\nReference: docs/plans/reranker-implementation.md (Section 4.1)\n\nUpdated flow:\n```typescript\nasync search(query: SearchQuery): Promise\u003cSearchResult[]\u003e {\n  // 1. Query classification (existing)\n  const classification = this.classifier.classify(query.text);\n\n  // 2. Hybrid retrieval - OVERSAMPLE\n  const rerankDepth = query.rerankDepth ?? 30;\n  const rawResults = await this.hybridSearch(query.text, rerankDepth, filters);\n\n  // 3. NEW: Reranking stage\n  if (query.rerank !== false) {\n    const tier = query.rerankTier ?? this.router.route(query.text, { classification });\n    const reranker = this.getReranker(tier);\n\n    const reranked = await reranker.rerank(\n      query.text,\n      rawResults.map(r =\u003e r.payload.content),\n      query.limit ?? 10\n    );\n\n    return this.mergeScores(rawResults, reranked);\n  }\n\n  return rawResults.slice(0, query.limit);\n}\n```\n\nLocation: packages/search-core/src/services/retriever.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:58:02.323205-06:00","updated_at":"2025-12-08T23:08:03.264261-06:00","closed_at":"2025-12-08T23:08:03.264261-06:00","close_reason":"Wired Reranker into SearchRetriever.search() - oversamples based on rerankDepth, applies cross-encoder reranking, returns results with rrfScore and rerankerScore fields","dependencies":[{"issue_id":"the-system-otm","depends_on_id":"the-system-1cg","type":"blocks","created_at":"2025-12-08T23:03:25.392307-06:00","created_by":"daemon"}]}
{"id":"the-system-p4j","title":"Write unit tests for BatchedReranker","description":"Test batch processing, latency budgets, concurrent processing. File: packages/search-core/src/services/__tests__/batched-reranker.test.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:01:43.01757-06:00","updated_at":"2025-12-08T23:01:43.01757-06:00"}
{"id":"the-system-pel","title":"Implement RERANK_CONFIG runtime configuration","description":"Implement runtime configuration for reranking.\n\nReference: docs/plans/reranker-implementation.md (Section 9.2)\n\nConfiguration structure:\n```typescript\nexport const RERANK_CONFIG = {\n  enabled: true,\n  defaultTier: \"fast\" as RerankerTier,\n\n  tiers: {\n    fast: {\n      model: \"Xenova/ms-marco-MiniLM-L-6-v2\",\n      maxLatencyMs: 50,\n      batchSize: 16,\n    },\n    accurate: {\n      model: \"Xenova/bge-reranker-base\",\n      maxLatencyMs: 150,\n      batchSize: 8,\n    },\n    code: {\n      model: \"jinaai/jina-reranker-v2-base-multilingual\",\n      maxLatencyMs: 150,\n      batchSize: 8,\n    },\n    llm: {\n      model: \"grok-4-1-fast-reasoning\",\n      maxLatencyMs: 2000,\n      maxCandidates: 10,\n    },\n  },\n\n  routing: {\n    codePatterns: [/\\w+\\.\\w+\\(/, /function\\s+\\w+/, /class\\s+\\w+/],\n    complexThreshold: 50,\n    agenticPatterns: [/tool|function|call|execute/i],\n  },\n\n  cache: {\n    queryResultTTL: 300,\n    documentRepresentationTTL: 3600,\n    maxCacheSize: 1024 * 1024 * 1024,\n  },\n};\n```\n\nLocation: packages/search-core/src/config.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:59:29.618242-06:00","updated_at":"2025-12-08T22:59:29.618242-06:00"}
{"id":"the-system-q00","title":"Add reranking environment variables","description":"Add environment variables for reranking configuration.\n\nReference: docs/plans/reranker-implementation.md (Section 9.1)\n\nEnvironment variables:\n```bash\n# Reranking configuration\nRERANK_ENABLED=true\nRERANK_DEFAULT_TIER=fast\nRERANK_DEPTH=30\nRERANK_TIMEOUT_MS=500\n\n# Model paths (for custom/local models)\nRERANK_MODEL_FAST=Xenova/ms-marco-MiniLM-L-6-v2\nRERANK_MODEL_ACCURATE=Xenova/bge-reranker-base\nRERANK_MODEL_CODE=jinaai/jina-reranker-v2-base-multilingual\nRERANK_MODEL_COLBERT=jinaai/jina-colbert-v2\n\n# LLM reranking (premium)\nLLM_RERANK_ENABLED=false\nLLM_RERANK_MODEL=grok-4-1-fast-reasoning\nLLM_RERANK_MAX_CANDIDATES=10\nXAI_API_KEY=your-xai-api-key\n```\n\nUpdate .env.example with all variables.\n\nLocation: .env.example, apps/search/.env.example","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:59:18.382605-06:00","updated_at":"2025-12-08T22:59:18.382605-06:00"}
{"id":"the-system-q20","title":"Implement sparse vector embeddings for hybrid search","description":"The embedSparse() method in search-core/services/text-embedder.ts returns empty {indices: [], values: []}. This makes hybrid search effectively dense-only. Need to implement SPLADE or BM25 sparse embeddings. Ref: TSD 3.3.1, docs/report/feature-parity-analysis.md","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-08T02:05:37.416913-06:00","updated_at":"2025-12-08T02:13:54.163104-06:00","closed_at":"2025-12-08T02:13:54.163104-06:00","close_reason":"Closed"}
{"id":"the-system-q4d","title":"[EPIC] Observability \u0026 Metrics","description":"Prometheus metrics, structured logging, and dashboards for reranking performance (Section 11)","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-08T23:01:26.84727-06:00","updated_at":"2025-12-08T23:01:26.84727-06:00","dependencies":[{"issue_id":"the-system-q4d","depends_on_id":"the-system-hcz","type":"blocks","created_at":"2025-12-08T23:03:04.506242-06:00","created_by":"daemon"}]}
{"id":"the-system-qgf","title":"Refactor Path Aliases","description":"Configure tsconfig paths (@/* or specific aliases) for all apps and packages to simplify imports.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T00:53:12.853766-06:00","updated_at":"2025-12-07T00:57:10.48543-06:00","closed_at":"2025-12-07T00:57:10.48543-06:00","close_reason":"Configured baseUrl and paths in tsconfig files. packages/tsconfig/base.json defines @/*, apps/interface/tsconfig.json defines @lib/* and @app/*."}
{"id":"the-system-qs2","title":"Redesign Soul System Interface with distinctive aesthetic","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T02:37:33.885606-06:00","updated_at":"2025-12-08T02:59:44.97476-06:00","closed_at":"2025-12-08T02:59:44.97476-06:00","close_reason":"Closed by user request"}
{"id":"the-system-sqb","title":"Add circuit breaker for reranking latency protection","description":"Implement circuit breaker to fall back to RRF if reranking is slow.\n\nReference: docs/plans/reranker-implementation.md (Section 12)\n\nRisk mitigation:\n- If rerank latency \u003e 500ms, fall back to RRF-only results\n- Circuit breaker pattern to prevent cascading failures\n- Log fallback events for monitoring\n\nImplementation:\n```typescript\nconst RERANK_TIMEOUT_MS = 500;\n\nasync searchWithRerank(query, rawResults) {\n  try {\n    const reranked = await Promise.race([\n      this.reranker.rerank(...),\n      timeout(RERANK_TIMEOUT_MS)\n    ]);\n    return reranked;\n  } catch (e) {\n    logger.warn({ event: \"rerank_fallback\", reason: e.message });\n    return rawResults; // Fallback to RRF\n  }\n}\n```\n\nLocation: packages/search-core/src/services/retriever.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:58:12.099734-06:00","updated_at":"2025-12-08T22:58:12.099734-06:00"}
{"id":"the-system-sxj","title":"Create Grafana dashboard for reranking metrics","description":"Dashboard panels: latency by tier, cache hit rate, score improvement distribution, error rates","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-08T23:02:03.550159-06:00","updated_at":"2025-12-08T23:02:03.550159-06:00"}
{"id":"the-system-test-apps-control","title":"Add Test Coverage: apps/control","description":"Add comprehensive unit and integration tests for apps/control","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:05:09.287286-06:00","closed_at":"2025-12-07T02:05:09.287288-06:00","labels":["apps","control","testing"]}
{"id":"the-system-test-apps-execution","title":"Add Test Coverage: apps/execution","description":"Add comprehensive unit and integration tests for apps/execution","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:03:42.250721-06:00","closed_at":"2025-12-07T02:03:42.250721-06:00","close_reason":"Added tests for Execution Service (VFS integration).","labels":["apps","execution","testing"]}
{"id":"the-system-test-apps-ingestion","title":"Add Test Coverage: apps/ingestion","description":"Add comprehensive unit and integration tests for apps/ingestion","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:05:02.450726-06:00","closed_at":"2025-12-07T02:05:02.450726-06:00","close_reason":"Added unit tests for IngestionProcessor with mocked Kafka.","labels":["apps","ingestion","testing"]}
{"id":"the-system-test-apps-interface","title":"Add Test Coverage: apps/interface","description":"Add comprehensive unit and integration tests for apps/interface","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:05:45.45239-06:00","closed_at":"2025-12-07T02:05:45.45239-06:00","close_reason":"Added unit tests for api-response and validation middleware.","labels":["apps","interface","testing"]}
{"id":"the-system-test-apps-memory","title":"Add Test Coverage: apps/memory","description":"Add comprehensive unit and integration tests for apps/memory","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:06:40.35145-06:00","closed_at":"2025-12-07T02:06:40.35145-06:00","close_reason":"Added unit tests for Memory Service.","labels":["apps","memory","testing"]}
{"id":"the-system-test-apps-search","title":"Add Test Coverage: apps/search","description":"Add comprehensive unit and integration tests for apps/search","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:08:18.988343-06:00","closed_at":"2025-12-07T02:08:18.988343-06:00","close_reason":"Added unit tests for SearchService with mocked dependencies.","labels":["apps","search","testing"]}
{"id":"the-system-test-packages-events","title":"Add Test Coverage: packages/events","description":"Add comprehensive unit and integration tests for packages/events","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:02:43.672865-06:00","closed_at":"2025-12-07T02:02:43.672865-06:00","close_reason":"Added unit tests.","labels":["events","packages","testing"]}
{"id":"the-system-test-packages-execution-core","title":"Add Test Coverage: packages/execution-core","description":"Add comprehensive unit and integration tests for packages/execution-core","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:02:43.706184-06:00","closed_at":"2025-12-07T02:02:43.706184-06:00","close_reason":"Added unit tests.","labels":["execution-core","packages","testing"]}
{"id":"the-system-test-packages-infra","title":"Add Test Coverage: packages/infra","description":"Add comprehensive unit and integration tests for packages/infra","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:08:35.766277-06:00","closed_at":"2025-12-07T02:08:35.766277-06:00","close_reason":"Already added smoke tests.","labels":["infra","packages","testing"]}
{"id":"the-system-test-packages-ingestion-core","title":"Add Test Coverage: packages/ingestion-core","description":"Add comprehensive unit and integration tests for packages/ingestion-core","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:02:43.737909-06:00","closed_at":"2025-12-07T02:02:43.737909-06:00","close_reason":"Added unit tests.","labels":["ingestion-core","packages","testing"]}
{"id":"the-system-test-packages-logger","title":"Add Test Coverage: packages/logger","description":"Add comprehensive unit and integration tests for packages/logger","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:02:43.768391-06:00","closed_at":"2025-12-07T02:02:43.768391-06:00","close_reason":"Added unit tests.","labels":["logger","packages","testing"]}
{"id":"the-system-test-packages-memory-core","title":"Add Test Coverage: packages/memory-core","description":"Add comprehensive unit and integration tests for packages/memory-core","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:02:50.41573-06:00","closed_at":"2025-12-07T02:02:50.415732-06:00","labels":["memory-core","packages","testing"]}
{"id":"the-system-test-packages-search-core","title":"Add Test Coverage: packages/search-core","description":"Add comprehensive unit and integration tests for packages/search-core","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:03:50.342864-06:00","closed_at":"2025-12-07T02:03:50.342867-06:00","labels":["packages","search-core","testing"]}
{"id":"the-system-test-packages-storage","title":"Add Test Coverage: packages/storage","description":"Add comprehensive unit and integration tests for packages/storage","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:02:43.830572-06:00","closed_at":"2025-12-07T02:02:43.830572-06:00","close_reason":"Added unit tests.","labels":["packages","storage","testing"]}
{"id":"the-system-test-packages-vfs","title":"Add Test Coverage: packages/vfs","description":"Add comprehensive unit and integration tests for packages/vfs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T08:00:00-06:00","updated_at":"2025-12-07T02:02:43.860444-06:00","closed_at":"2025-12-07T02:02:43.860444-06:00","close_reason":"Already covered.","labels":["packages","testing","vfs"]}
{"id":"the-system-tim","title":"Update SearchIndexer to generate ColBERT representations","description":"Update indexer to generate ColBERT token embeddings at index time.\n\nReference: docs/plans/reranker-implementation.md (Section 5.2, Strategy 2)\n\nUpdate indexNode():\n```typescript\nasync indexNode(node: IndexableNode) {\n  // Existing dense/sparse vectors\n  const textVector = await this.textEmbedder.embed(content);\n  const sparseVector = await this.textEmbedder.embedSparse(content);\n\n  // NEW: ColBERT token embeddings for late interaction\n  const colbertEmbeddings = await this.colbertEmbedder.encode(content);\n\n  await this.client.upsert(this.collectionName, {\n    points: [{\n      id: node.id,\n      vector: {\n        text_dense: textVector,\n        sparse: sparseVector,\n        colbert: colbertEmbeddings, // Multivector field\n      },\n      payload,\n    }],\n  });\n}\n```\n\nLocation: packages/search-core/src/services/indexer.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:56:57.2403-06:00","updated_at":"2025-12-08T22:56:57.2403-06:00","dependencies":[{"issue_id":"the-system-tim","depends_on_id":"the-system-v6c","type":"blocks","created_at":"2025-12-08T23:03:22.919858-06:00","created_by":"daemon"}]}
{"id":"the-system-v6c","title":"Add colbert multivector field to Qdrant schema","description":"Add ColBERT multivector field to Qdrant collection schema.\n\nReference: docs/plans/reranker-implementation.md (Section 7.1)\n\nSchema update:\n```typescript\nconst COLLECTION_CONFIG = {\n  vectors: {\n    text_dense: { size: 384, distance: \"Cosine\" },\n    code_dense: { size: 768, distance: \"Cosine\" },\n    // NEW: ColBERT multivector for late interaction\n    colbert: {\n      size: 128,  // Jina ColBERT v2 token dim\n      distance: \"Cosine\",\n      multivector_config: {\n        comparator: \"max_sim\"  // MaxSim for late interaction\n      }\n    },\n  },\n  // ... sparse_vectors unchanged\n};\n```\n\nRequires schema migration for existing data.\n\nLocation: packages/search-core/src/services/schema-manager.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:56:47.551034-06:00","updated_at":"2025-12-08T22:56:47.551034-06:00","dependencies":[{"issue_id":"the-system-v6c","depends_on_id":"the-system-dkx","type":"blocks","created_at":"2025-12-08T23:03:21.88198-06:00","created_by":"daemon"}]}
{"id":"the-system-vyl","title":"Implement BatchedReranker class","description":"Implement BatchedReranker for parallel document scoring.\n\nReference: docs/plans/reranker-implementation.md (Section 3.2.2)\n\nInterface:\n```typescript\nexport interface BatchedRerankerOptions {\n  model: string;\n  maxBatchSize: number;        // Default: 16\n  maxConcurrency: number;      // Default: 4\n  quantization: \"fp16\" | \"q8\"; // Default: q8\n  cacheEnabled: boolean;\n}\n```\n\nKey optimizations:\n- Dynamic batching based on document length\n- Concurrent batch processing via p-queue\n- Query-document pair caching (LRU)\n\nLocation: packages/search-core/src/services/batched-reranker.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:55:14.679825-06:00","updated_at":"2025-12-08T22:55:14.679825-06:00","dependencies":[{"issue_id":"the-system-vyl","depends_on_id":"the-system-020","type":"blocks","created_at":"2025-12-08T22:55:19.883161-06:00","created_by":"daemon"}]}
{"id":"the-system-wbq","title":"Add SpladeEmbedder unit tests","description":"Write unit tests for SpladeEmbedder: sparse vector generation, semantic expansion, empty input handling, sparsity verification. Add to packages/search-core/src/services/splade-embedder.test.ts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:25:06.82236-06:00","updated_at":"2025-12-08T19:40:14.347408-06:00","closed_at":"2025-12-08T19:40:14.347408-06:00","close_reason":"Added comprehensive unit tests for SpladeEmbedder with mocked transformers","dependencies":[{"issue_id":"the-system-wbq","depends_on_id":"the-system-5nj","type":"blocks","created_at":"2025-12-08T19:25:16.392869-06:00","created_by":"daemon"}]}
{"id":"the-system-wpc","title":"Fix rehydrator session filtering","description":"The Rehydrator in execution-core/src/rehydrator.ts has incomplete session filtering. Cypher queries may return global results instead of session-specific. Need to add session_id parameter to all graph queries. Ref: create-file-state-rehydrator.md","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-08T02:06:08.160022-06:00","updated_at":"2025-12-08T02:23:19.701376-06:00","closed_at":"2025-12-08T02:23:19.701376-06:00","close_reason":"Closed"}
{"id":"the-system-wr5","title":"Bounded Context: Deterministic Execution","description":"The 'Motor Cortex'. Virtual File System, Wasm sandbox, and tool execution. See docs/bitemporal/context/deterministic-execution/","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:47:42.435989-06:00","updated_at":"2025-12-06T22:33:15.120536-06:00","closed_at":"2025-12-06T22:33:15.120538-06:00","labels":["context","execution","wasm"]}
{"id":"the-system-wr5.1","title":"Define Virtual File System Structure","description":"In-memory Serializable JSON VFS (Files/Dirs). See docs/bitemporal/context/deterministic-execution/define-virtual-file-system-structure.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:12.586566-06:00","updated_at":"2025-12-06T22:29:38.233354-06:00","closed_at":"2025-12-06T22:29:38.233359-06:00","labels":["execution","structure","vfs"],"dependencies":[{"issue_id":"the-system-wr5.1","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.586995-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.10","title":"Implement Tool Execution Monitor","description":"Orchestrate Wasm start and timeout monitoring. See docs/bitemporal/context/deterministic-execution/implement-tool-execution-monitor.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:12.967993-06:00","updated_at":"2025-12-06T22:30:52.068871-06:00","closed_at":"2025-12-06T22:30:52.068873-06:00","labels":["execution","monitor"],"dependencies":[{"issue_id":"the-system-wr5.10","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.968351-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.11","title":"Develop Output Capture","description":"Capture stdout/stderr from Wasm instance. See docs/bitemporal/context/deterministic-execution/develop-output-capture.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:13.012726-06:00","updated_at":"2025-12-06T22:30:52.096075-06:00","closed_at":"2025-12-06T22:30:52.096077-06:00","labels":["execution","io","logs"],"dependencies":[{"issue_id":"the-system-wr5.11","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:13.013154-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.12","title":"Implement Deterministic Replay Engine","description":"Re-run sessions with mocked Time/RNG. See docs/bitemporal/context/deterministic-execution/implement-deterministic-replay-engine.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:52:13.055726-06:00","updated_at":"2025-12-06T22:31:25.804664-06:00","closed_at":"2025-12-06T22:31:25.804666-06:00","labels":["determinism","execution","replay"],"dependencies":[{"issue_id":"the-system-wr5.12","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:13.056108-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.13","title":"Create Time Travel State Reconstruction","description":"Export VFS state at specific event_id. See docs/bitemporal/context/deterministic-execution/create-time-travel-state-reconstruction.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T21:52:13.09828-06:00","updated_at":"2025-12-06T23:52:26.332939-06:00","closed_at":"2025-12-06T23:52:26.332942-06:00","labels":["debugging","execution","time-travel"],"dependencies":[{"issue_id":"the-system-wr5.13","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:13.098657-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.14","title":"Define Execution Error Handling","description":"Classify User vs System errors. See docs/bitemporal/context/deterministic-execution/define-execution-error-handling.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:52:13.139375-06:00","updated_at":"2025-12-06T22:31:25.836445-06:00","closed_at":"2025-12-06T22:31:25.836447-06:00","labels":["errors","execution"],"dependencies":[{"issue_id":"the-system-wr5.14","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:13.139707-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.15","title":"Implement Wassette MCP Client","description":"Expose execution tools via MCP. See docs/bitemporal/context/deterministic-execution/implement-wassette-mcp-client.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:52:13.183237-06:00","updated_at":"2025-12-06T22:31:25.865417-06:00","closed_at":"2025-12-06T22:31:25.865419-06:00","labels":["api","execution","mcp"],"dependencies":[{"issue_id":"the-system-wr5.15","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:13.183643-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.2","title":"Implement VFS Snapshot Logic","description":"Serialize/Compress VFS state to JSON/Gzip. See docs/bitemporal/context/deterministic-execution/implement-vfs-snapshot-logic.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:12.629537-06:00","updated_at":"2025-12-06T22:29:38.265809-06:00","closed_at":"2025-12-06T22:29:38.265812-06:00","labels":["execution","snapshot","vfs"],"dependencies":[{"issue_id":"the-system-wr5.2","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.629924-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.3","title":"Implement Diff Application Logic","description":"Apply Unified Diffs to VFS files. See docs/bitemporal/context/deterministic-execution/implement-diff-application-logic.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:12.673244-06:00","updated_at":"2025-12-06T22:29:38.29288-06:00","closed_at":"2025-12-06T22:29:38.292881-06:00","labels":["diff","execution","vfs"],"dependencies":[{"issue_id":"the-system-wr5.3","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.673664-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.4","title":"Create File State Rehydrator","description":"Reconstruct VFS from Snapshot + Diffs chain. See docs/bitemporal/context/deterministic-execution/create-file-state-rehydrator.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:12.715327-06:00","updated_at":"2025-12-06T22:29:41.480122-06:00","closed_at":"2025-12-06T22:29:41.480129-06:00","labels":["execution","rehydration","vfs"],"dependencies":[{"issue_id":"the-system-wr5.4","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.715735-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.5","title":"Define Wassette Runtime Configuration","description":"Wasm runtime config schema (memory, env, preopens). See docs/bitemporal/context/deterministic-execution/define-wassette-runtime-configuration.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:12.75718-06:00","updated_at":"2025-12-06T22:30:19.573724-06:00","closed_at":"2025-12-06T22:30:19.573727-06:00","labels":["config","execution","wasm"],"dependencies":[{"issue_id":"the-system-wr5.5","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.757567-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.6","title":"Implement Wasm Module Loader","description":"Load and cache Wasm binaries (Python, QuickJS). See docs/bitemporal/context/deterministic-execution/implement-wasm-module-loader.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:52:12.798975-06:00","updated_at":"2025-12-06T22:30:19.604291-06:00","closed_at":"2025-12-06T22:30:19.604297-06:00","labels":["execution","loader","wasm"],"dependencies":[{"issue_id":"the-system-wr5.6","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.799295-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.7","title":"Develop Sandbox Security Policy","description":"Enforce No-Network, Read-Only Sysroot. See docs/bitemporal/context/deterministic-execution/develop-sandbox-security-policy.md","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T21:52:12.840586-06:00","updated_at":"2025-12-06T22:30:19.633304-06:00","closed_at":"2025-12-06T22:30:19.633306-06:00","labels":["execution","sandbox","security"],"dependencies":[{"issue_id":"the-system-wr5.7","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.841015-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.8","title":"Implement Standard Tool Wrapper","description":"Python/JS wrapper to read stdin args and print JSON stdout. See docs/bitemporal/context/deterministic-execution/implement-standard-tool-wrapper-wasm.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:52:12.883147-06:00","updated_at":"2025-12-06T22:30:52.011823-06:00","closed_at":"2025-12-06T22:30:52.011826-06:00","labels":["execution","tools","wrapper"],"dependencies":[{"issue_id":"the-system-wr5.8","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.883517-06:00","created_by":"daemon"}]}
{"id":"the-system-wr5.9","title":"Create MCP Tool Registry","description":"Registry mapping tool names to Wasm entrypoints. See docs/bitemporal/context/deterministic-execution/create-mcp-tool-registry.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T21:52:12.926676-06:00","updated_at":"2025-12-06T22:30:52.04181-06:00","closed_at":"2025-12-06T22:30:52.041813-06:00","labels":["execution","mcp","registry"],"dependencies":[{"issue_id":"the-system-wr5.9","depends_on_id":"the-system-wr5","type":"parent-child","created_at":"2025-12-06T21:52:12.927093-06:00","created_by":"daemon"}]}
{"id":"the-system-wv6","title":"Add Prometheus metrics for reranking latency","description":"Histogram: search_rerank_latency_ms with tier/model labels, buckets [10,25,50,100,200,500,1000]ms","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:01:59.452692-06:00","updated_at":"2025-12-08T23:01:59.452692-06:00"}
{"id":"the-system-x3n","title":"Implement LLMListwiseReranker class","description":"Implement LLM-based listwise reranker using grok-4-1-fast-reasoning.\n\nReference: docs/plans/reranker-implementation.md (Section 3.2.4)\n\nInterface:\n```typescript\nexport interface LLMRerankerOptions {\n  model: \"grok-4-1-fast-reasoning\";\n  maxCandidates: number;  // Max 10 for context efficiency\n  systemPrompt?: string;  // Custom ranking instructions\n}\n\nexport class LLMListwiseReranker {\n  async rerank(\n    query: string,\n    candidates: DocumentCandidate[],\n    topK: number\n  ): Promise\u003cRerankResult[]\u003e;\n}\n```\n\nImplementation notes:\n- Single API call with all candidates in prompt\n- Request ordered list response\n- Parse ranking from LLM output\n- Handle rate limiting and errors\n\nLocation: packages/search-core/src/services/llm-reranker.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T22:57:14.539443-06:00","updated_at":"2025-12-08T22:57:14.539443-06:00","dependencies":[{"issue_id":"the-system-x3n","depends_on_id":"the-system-g0a","type":"blocks","created_at":"2025-12-08T23:03:24.05078-06:00","created_by":"daemon"}]}
{"id":"the-system-xr2","title":"Add unit tests for sparse and hybrid search in SearchRetriever","description":"Add unit tests for the new sparse and hybrid search paths in SearchRetriever.\n\nReference: docs/plans/hybrid-retriever.md (Phase 4)\n\nChanges to packages/search-core/src/services/retriever.test.ts:\n\nNew test cases:\n1. \"should perform sparse-only search\"\n   - Mock textEmbedder.embedSparseQuery to return { indices: [...], values: [...] }\n   - Call search() with strategy: \"sparse\"\n   - Verify client.query called with sparse vector format\n   - Verify using: \"sparse\" in the query\n\n2. \"should perform hybrid search with RRF fusion\"\n   - Mock both embedQuery and embedSparseQuery\n   - Call search() with strategy: \"hybrid\"\n   - Verify client.query called with prefetch array containing both vectors\n   - Verify query: { fusion: \"rrf\" } is present\n\n3. \"should handle code search in hybrid mode\"\n   - Set filters.type = \"code\"\n   - Verify prefetch uses \"code_dense\" vector name (not \"text_dense\")\n\n4. \"should oversample in prefetch for better fusion\"\n   - Request limit: 5\n   - Verify prefetch limit is 10 (2x)\n\nExisting integration tests in hybrid-search.integration.test.ts already cover end-to-end behavior.\n\nDepends on: the-system-6bo (hybrid implementation must exist to test it)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T21:38:21.041701-06:00","updated_at":"2025-12-08T21:50:12.32914-06:00","closed_at":"2025-12-08T21:50:12.32914-06:00","close_reason":"Added 4 unit tests for sparse search, hybrid search with RRF fusion, code search, and oversampling. Fixed test file to use vitest mocking.","dependencies":[{"issue_id":"the-system-xr2","depends_on_id":"the-system-6bo","type":"blocks","created_at":"2025-12-08T21:38:28.77441-06:00","created_by":"daemon"}]}
{"id":"the-system-xtr","title":"Expand GraphQL query execution","description":"GraphQL handler in interface/app/api/graphql/route.ts is minimal. Schema is defined but resolvers need full implementation for session, search, and graph queries. Ref: create-graphql-schema-definition.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T02:06:26.65604-06:00","updated_at":"2025-12-08T02:37:25.907356-06:00","closed_at":"2025-12-08T02:37:25.907356-06:00","close_reason":"Implemented search, graph, and ToolCall resolvers with SearchRetriever integration"}
{"id":"the-system-yfq","title":"Implement lazy model loading with unload on idle","description":"Load reranker models on first use. Unload after 5min idle to prevent OOM. Track model_loaded/model_unloaded events.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:28.222358-06:00","updated_at":"2025-12-08T23:02:28.222358-06:00"}
{"id":"the-system-yu2","title":"Implement Qdrant snapshot recovery","description":"SnapshotManager can list and create snapshots but cannot restore from them. Need to implement restoreSnapshot() method for disaster recovery. Ref: implement-qdrant-snapshot-manager.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T02:06:29.976926-06:00","updated_at":"2025-12-08T02:44:01.472982-06:00","closed_at":"2025-12-08T02:44:01.472982-06:00","close_reason":"Implemented recoverSnapshot, recoverFromLatest, deleteSnapshot methods with tests"}
{"id":"the-system-yvk","title":"Implement document representation LRU cache","description":"In-memory LRU cache for ColBERT document embeddings. Max size 1GB, 1hr TTL. Invalidate on document update.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-08T23:02:12.52381-06:00","updated_at":"2025-12-08T23:02:12.52381-06:00"}
{"id":"the-system-yvm","title":"Verify Wasm Tool Execution","description":"the-system-1p4","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T00:36:29.042108-06:00","updated_at":"2025-12-07T00:43:53.917833-06:00","closed_at":"2025-12-07T00:43:53.917833-06:00","close_reason":"Created and passed tests/e2e/wassette_integration.test.ts verifying connection to wassette serve --stdio."}
{"id":"the-system-yxm","title":"Implement async reranking option","description":"Return RRF results immediately, rerank in background, push refined results via WebSocket. Opt-in per query.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-08T23:02:14.294709-06:00","updated_at":"2025-12-08T23:02:14.294709-06:00"}
{"id":"the-system-z60","title":"Implement deterministic replay engine","description":"The ReplayEngine class in execution-core/src/replay.ts is a complete stub. Need to implement: VFS rehydration, RNG seeding for determinism, Date.now() mocking, execution and output comparison. Ref: TSD 3.4.1, implement-deterministic-replay-engine.md","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-08T02:05:38.580517-06:00","updated_at":"2025-12-08T02:25:22.052627-06:00","closed_at":"2025-12-08T02:25:22.052627-06:00","close_reason":"Closed","dependencies":[{"issue_id":"the-system-z60","depends_on_id":"the-system-wpc","type":"blocks","created_at":"2025-12-08T02:06:46.309574-06:00","created_by":"daemon"}]}
