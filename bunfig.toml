[test]
# Root-level preload for monorepo-wide test mocking
# Mocks module-level singletons (FalkorDB, NATS, Logger) before tests import them
preload = ["./test-preload.ts"]

# Exclude non-Bun test files
# Observatory tests require Next.js runtime for path aliases and API routes
# For CI, see scripts/test.sh which excludes mock.module tests
ignore = [
  "**/*.spec.ts",
  "**/node_modules/**",
  "apps/observatory/**/*.test.ts",
]

# Timeouts (30s for long-running tests)
timeout = 30000

# Coverage configuration
# Note: Run with --coverage flag to enable (bun test --coverage)
# coverageDir = "./coverage"
# coverageReporter = ["text", "lcov", "html"]
# coverageThreshold = { line = 90, function = 90, statement = 90 }
